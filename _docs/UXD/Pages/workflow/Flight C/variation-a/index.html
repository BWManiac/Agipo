<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flight C - Variation A: Vertical Scrolling Showcase</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Space Grotesk', system-ui, sans-serif; }
    code, pre, .font-mono { font-family: 'JetBrains Mono', monospace; }
    
    html { scroll-behavior: smooth; }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #1a1a2e; }
    ::-webkit-scrollbar-thumb { background: #4a4a6a; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #6366f1; }
    
    /* Sticky sidebar */
    .sidebar-nav { position: fixed; left: 0; top: 0; width: 280px; height: 100vh; overflow-y: auto; }
    .main-content { margin-left: 280px; }
    
    /* Section styling */
    .state-section { 
      min-height: 100vh; 
      border-bottom: 1px solid #2a2a4a;
      scroll-margin-top: 20px;
    }
    
    /* Active nav indicator */
    .nav-item.active { background: rgba(99, 102, 241, 0.2); border-left-color: #6366f1; }
    
    /* Mockup container */
    .mockup-container {
      background: #0f0f1a;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    /* Canvas dot pattern */
    .canvas-dots {
      background-image: radial-gradient(circle, #2a2a4a 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Connection lines */
    .connection-line {
      stroke: #6366f1;
      stroke-width: 2;
      fill: none;
    }
    
    /* Animations */
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-pulse { animation: pulse 2s infinite; }
    .animate-spin { animation: spin 1s linear infinite; }
    
    /* State badge */
    .state-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 9999px;
      font-size: 12px;
      color: #a5b4fc;
    }
  </style>
</head>
<body class="bg-[#0a0a14] text-gray-100">
  
  <!-- Sticky Sidebar Navigation -->
  <nav class="sidebar-nav bg-[#0f0f1a] border-r border-[#1a1a2e] p-4 z-50">
    <div class="mb-6">
      <h1 class="text-xl font-bold text-white">Flight C</h1>
      <p class="text-xs text-gray-500 mt-1">Variation A: Design System</p>
    </div>
    
    <div class="space-y-1">
      <!-- Core Editing -->
      <div class="mb-4">
        <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-3">Core Editing</h3>
        <a href="#state-empty" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          1. Empty State
        </a>
        <a href="#state-list-editing" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          2. List View - Editing
        </a>
        <a href="#state-canvas-editing" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          3. Canvas View - Editing
        </a>
        <a href="#state-step-selected" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          4. Step Selected
        </a>
      </div>
      
      <!-- Control Flow -->
      <div class="mb-4">
        <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-3">Control Flow</h3>
        <a href="#state-branch" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          5. Branch (If/Else)
        </a>
        <a href="#state-parallel" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          6. Parallel Branches
        </a>
        <a href="#state-loop" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          7. Loop (While/Until)
        </a>
      </div>
      
      <!-- Panel States -->
      <div class="mb-4">
        <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-3">Panel States</h3>
        <a href="#state-tools-tab" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          8. Tools Tab
        </a>
        <a href="#state-inputs-tab" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          9. Inputs Tab
        </a>
        <a href="#state-config-tab" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          10. Config Tab
        </a>
        <a href="#state-connect-tab" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          11. Connect Tab
        </a>
        <a href="#state-test-tab" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          12. Test Tab
        </a>
      </div>
      
      <!-- Modals -->
      <div class="mb-4">
        <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-3">Modals</h3>
        <a href="#state-mapping-modal" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          13. Data Mapping Modal
        </a>
        <a href="#state-add-step-wizard" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          14. Add Step Wizard
        </a>
      </div>
      
      <!-- Test Execution -->
      <div class="mb-4">
        <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-3">Test Execution</h3>
        <a href="#state-test-running" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          15. Test Running
        </a>
        <a href="#state-test-success" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          16. Test Success
        </a>
        <a href="#state-test-error" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          17. Test Error
        </a>
      </div>
      
      <!-- Other Views -->
      <div class="mb-4">
        <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 px-3">Other Views</h3>
        <a href="#state-spec-view" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          18. Spec View
        </a>
        <a href="#state-code-view" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          19. Code View
        </a>
        <a href="#state-ai-conversation" class="nav-item block px-3 py-2 text-sm text-gray-400 hover:text-white hover:bg-white/5 rounded border-l-2 border-transparent transition-all">
          20. AI Conversation
        </a>
      </div>
    </div>
    
    <div class="mt-8 pt-4 border-t border-[#1a1a2e]">
      <p class="text-xs text-gray-600">Scroll to explore all states</p>
      <p class="text-xs text-gray-600 mt-1">Click nav items to jump</p>
    </div>
  </nav>
  
  <!-- Main Content Area -->
  <main class="main-content">
    
    <!-- ========================================== -->
    <!-- SECTION 1: EMPTY STATE -->
    <!-- ========================================== -->
    <section id="state-empty" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <!-- Section Header -->
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 1 of 20</span>
            <span class="text-xs text-gray-500">Core Editing</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Empty State</h2>
          <p class="text-gray-400 mt-2">Initial state when creating a new workflow. Shows guidance and call-to-action.</p>
        </div>
        
        <!-- Mockup -->
        <div class="mockup-container">
          <!-- Top Bar -->
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Untitled Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none focus:ring-0 w-64" />
            </div>
            <div class="flex items-center gap-3">
              <!-- Abstraction Level Toggle -->
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-indigo-600 text-white">Flow</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400 hover:text-white">Spec</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400 hover:text-white">Code</button>
              </div>
              <!-- View Toggle -->
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400 hover:text-white">Canvas</button>
              </div>
              <button class="px-4 py-2 text-sm font-medium text-gray-400 hover:text-white">Save</button>
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">Publish</button>
            </div>
          </header>
          
          <!-- 3-Column Layout -->
          <div class="flex h-[600px]">
            <!-- Left: AI Chat -->
            <aside class="w-72 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col">
              <div class="p-4 border-b border-[#1a1a2e]">
                <h3 class="text-sm font-semibold text-white flex items-center gap-2">
                  <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                  AI Assistant
                </h3>
              </div>
              <div class="flex-1 p-4 flex flex-col items-center justify-center text-center">
                <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4">
                  <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                </div>
                <h4 class="text-white font-medium mb-2">Let's build something</h4>
                <p class="text-gray-500 text-sm mb-4">Describe what you want to automate and I'll help you build the workflow.</p>
              </div>
              <div class="p-4 border-t border-[#1a1a2e]">
                <div class="flex gap-2">
                  <input type="text" placeholder="Describe your workflow..." class="flex-1 bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500" />
                  <button class="w-10 h-10 bg-indigo-600 hover:bg-indigo-700 rounded-lg flex items-center justify-center text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>
                  </button>
                </div>
              </div>
            </aside>
            
            <!-- Center: Empty Workflow Area -->
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <div class="text-center max-w-md">
                <div class="w-20 h-20 rounded-2xl bg-[#1a1a2e] flex items-center justify-center mx-auto mb-6">
                  <svg class="w-10 h-10 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"/></svg>
                </div>
                <h2 class="text-2xl font-bold text-white mb-3">Start building your workflow</h2>
                <p class="text-gray-400 mb-6">Add your first step from the tools palette, or describe what you want to build and let AI help you.</p>
                <button class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg flex items-center gap-2 mx-auto">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                  Add First Step
                </button>
              </div>
            </main>
            
            <!-- Right: Tool Palette (Empty State) -->
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <!-- Tabs -->
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Test</button>
              </div>
              <div class="p-4">
                <!-- Search -->
                <div class="relative mb-4">
                  <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                  <input type="text" placeholder="Search tools..." class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500" />
                </div>
                
                <p class="text-gray-500 text-sm text-center py-8">Select tools from your connected integrations to start building.</p>
              </div>
            </aside>
          </div>
        </div>
        
        <!-- Design Notes -->
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Persistent 3-column layout: AI Chat | Workflow Area | Settings Panel</li>
            <li>‚Ä¢ Clear call-to-action guides user to either use AI or manually add steps</li>
            <li>‚Ä¢ AI assistant is inviting but not intrusive</li>
            <li>‚Ä¢ Tools tab is default but shows empty state until user has connections</li>
          </ul>
        </div>
      </div>
    </section>
    
    <!-- ========================================== -->
    <!-- SECTION 2: LIST VIEW - EDITING -->
    <!-- ========================================== -->
    <section id="state-list-editing" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 2 of 20</span>
            <span class="text-xs text-gray-500">Core Editing</span>
          </div>
          <h2 class="text-2xl font-bold text-white">List View - Editing</h2>
          <p class="text-gray-400 mt-2">Timeline-based list view showing sequential workflow steps. SOP-style readability.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
              <span class="px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">Saved</span>
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-indigo-600 text-white">Flow</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Spec</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Code</button>
              </div>
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Canvas</button>
              </div>
              <button class="px-4 py-2 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                Test
              </button>
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">Publish</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- Left: AI Chat (collapsed to icon) -->
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white hover:scale-105 transition-transform" title="Open AI Assistant">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
              <div class="w-2 h-2 bg-green-500 rounded-full mt-2"></div>
            </aside>
            
            <!-- Center: Timeline List View -->
            <main class="flex-1 bg-[#0a0a14] overflow-y-auto p-6">
              <div class="max-w-2xl mx-auto">
                <!-- Workflow Description (SOP Header) -->
                <div class="mb-8 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
                  <p class="text-gray-300 text-sm">
                    <strong class="text-white">Purpose:</strong> Automatically scrape job listings, generate tailored resumes, and send application emails.
                  </p>
                </div>
                
                <!-- Step 1: Trigger -->
                <div class="relative pl-8 pb-8">
                  <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xs font-bold">1</div>
                  <div class="absolute left-[11px] top-6 bottom-0 w-0.5 bg-[#2a2a4a]"></div>
                  
                  <div class="bg-[#12121f] rounded-lg border border-[#1a1a2e] hover:border-indigo-500/50 transition-colors cursor-pointer">
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                          <span class="text-lg">üî•</span>
                          <h3 class="font-semibold text-white">Scrape Job Listing</h3>
                        </div>
                        <span class="px-2 py-0.5 text-xs bg-blue-500/20 text-blue-400 rounded">Firecrawl</span>
                      </div>
                      <p class="text-sm text-gray-400">Extract job details from the provided URL including title, company, requirements, and contact info.</p>
                      <div class="mt-3 flex items-center gap-4 text-xs text-gray-500">
                        <span>Input: <code class="text-indigo-400">jobUrl</code></span>
                        <span>Output: <code class="text-emerald-400">jobData</code></span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Mapping Badge -->
                <div class="relative pl-8 pb-2">
                  <div class="absolute left-[11px] top-0 bottom-0 w-0.5 bg-[#2a2a4a]"></div>
                  <button class="flex items-center gap-2 px-3 py-1.5 bg-[#1a1a2e] hover:bg-[#252538] rounded-full text-xs text-gray-400 hover:text-white transition-colors ml-4">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/></svg>
                    3 fields mapped
                  </button>
                </div>
                
                <!-- Step 2 -->
                <div class="relative pl-8 pb-8">
                  <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xs font-bold">2</div>
                  <div class="absolute left-[11px] top-6 bottom-0 w-0.5 bg-[#2a2a4a]"></div>
                  
                  <div class="bg-[#12121f] rounded-lg border border-[#1a1a2e] hover:border-indigo-500/50 transition-colors cursor-pointer">
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                          <span class="text-lg">ü§ñ</span>
                          <h3 class="font-semibold text-white">Generate Tailored Resume</h3>
                        </div>
                        <span class="px-2 py-0.5 text-xs bg-purple-500/20 text-purple-400 rounded">OpenAI</span>
                      </div>
                      <p class="text-sm text-gray-400">Use AI to customize the resume based on job requirements and company culture.</p>
                      <div class="mt-3 flex items-center gap-4 text-xs text-gray-500">
                        <span>Input: <code class="text-indigo-400">jobData</code>, <code class="text-indigo-400">baseResume</code></span>
                        <span>Output: <code class="text-emerald-400">tailoredResume</code></span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Mapping Badge -->
                <div class="relative pl-8 pb-2">
                  <div class="absolute left-[11px] top-0 bottom-0 w-0.5 bg-[#2a2a4a]"></div>
                  <button class="flex items-center gap-2 px-3 py-1.5 bg-[#1a1a2e] hover:bg-[#252538] rounded-full text-xs text-gray-400 hover:text-white transition-colors ml-4">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"/></svg>
                    1 field mapped
                  </button>
                </div>
                
                <!-- Step 3 -->
                <div class="relative pl-8 pb-8">
                  <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-white text-xs font-bold">3</div>
                  
                  <div class="bg-[#12121f] rounded-lg border border-[#1a1a2e] hover:border-indigo-500/50 transition-colors cursor-pointer">
                    <div class="p-4">
                      <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                          <span class="text-lg">üìß</span>
                          <h3 class="font-semibold text-white">Send Application Email</h3>
                        </div>
                        <span class="px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">Gmail</span>
                      </div>
                      <p class="text-sm text-gray-400">Send the tailored resume and cover letter to the hiring contact.</p>
                      <div class="mt-3 flex items-center gap-4 text-xs text-gray-500">
                        <span>Input: <code class="text-indigo-400">tailoredResume</code>, <code class="text-indigo-400">recipientEmail</code></span>
                        <span>Output: <code class="text-emerald-400">emailStatus</code></span>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Add Step Button -->
                <div class="relative pl-8">
                  <button class="flex items-center gap-2 px-4 py-2 border-2 border-dashed border-[#2a2a4a] hover:border-indigo-500 rounded-lg text-gray-400 hover:text-white transition-colors w-full justify-center">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                    Add Step
                  </button>
                </div>
              </div>
            </main>
            
            <!-- Right: Tools Panel -->
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Test</button>
              </div>
              <div class="p-4">
                <div class="relative mb-4">
                  <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                  <input type="text" placeholder="Search tools..." class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-500" />
                </div>
                
                <!-- Tool Categories -->
                <div class="space-y-4">
                  <div>
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Web Scraping</h4>
                    <div class="space-y-1">
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üîç</span> Scrape Page
                      </button>
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üó∫Ô∏è</span> Crawl Site
                      </button>
                    </div>
                  </div>
                  <div>
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">AI / LLM</h4>
                    <div class="space-y-1">
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üí¨</span> Chat Completion
                      </button>
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üìù</span> Generate Text
                      </button>
                    </div>
                  </div>
                  <div>
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Email</h4>
                    <div class="space-y-1">
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üì§</span> Send Email
                      </button>
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üì•</span> Read Email
                      </button>
                    </div>
                  </div>
                  <div>
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Control Flow</h4>
                    <div class="space-y-1">
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üîÄ</span> Branch (If/Else)
                      </button>
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>‚è∏Ô∏è</span> Parallel
                      </button>
                      <button class="w-full text-left px-3 py-2 rounded-lg hover:bg-[#1a1a2e] text-sm text-gray-300 flex items-center gap-2">
                        <span>üîÅ</span> Loop
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Timeline layout emphasizes sequential nature - reads like an SOP</li>
            <li>‚Ä¢ Each step shows purpose, inputs, and outputs at a glance</li>
            <li>‚Ä¢ Mapping badges between steps show data flow (clickable to edit)</li>
            <li>‚Ä¢ AI chat collapsed to icon but always accessible</li>
            <li>‚Ä¢ Integration badges (Firecrawl, OpenAI, Gmail) provide context</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Placeholder for remaining sections - will be added -->
    <section id="state-canvas-editing" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 3 of 20</span>
            <span class="text-xs text-gray-500">Core Editing</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Canvas View - Editing</h2>
          <p class="text-gray-400 mt-2">Node-based visual canvas for complex workflows with branching and parallel paths.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-indigo-600 text-white">Flow</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Spec</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Code</button>
              </div>
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">Canvas</button>
              </div>
              <button class="px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/></svg>
                Test
              </button>
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Publish</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- Left: AI Chat (collapsed) -->
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <!-- Center: Canvas -->
            <main class="flex-1 bg-[#0a0a14] canvas-dots relative overflow-hidden">
              <!-- Canvas SVG for connections -->
              <svg class="absolute inset-0 w-full h-full pointer-events-none">
                <!-- Connection: Step 1 ‚Üí Step 2 -->
                <path d="M 280 150 C 350 150, 350 300, 420 300" class="connection-line" />
                <!-- Connection: Step 2 ‚Üí Step 3 -->
                <path d="M 620 300 C 690 300, 690 450, 760 450" class="connection-line" />
              </svg>
              
              <!-- Node: Step 1 - Scrape -->
              <div class="absolute left-[80px] top-[100px] w-[200px] bg-[#12121f] rounded-xl border border-[#2a2a4a] hover:border-indigo-500 transition-colors cursor-pointer shadow-xl">
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üî•</span>
                    <span class="text-sm font-medium text-white">Scrape Job</span>
                  </div>
                </div>
                <div class="p-3">
                  <div class="text-xs text-gray-500 mb-1">Firecrawl</div>
                  <div class="flex items-center justify-between text-xs">
                    <span class="text-indigo-400">1 input</span>
                    <span class="text-emerald-400">4 outputs</span>
                  </div>
                </div>
                <!-- Output handle -->
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Node: Step 2 - Generate -->
              <div class="absolute left-[420px] top-[250px] w-[200px] bg-[#12121f] rounded-xl border border-[#2a2a4a] hover:border-indigo-500 transition-colors cursor-pointer shadow-xl">
                <!-- Input handle -->
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">ü§ñ</span>
                    <span class="text-sm font-medium text-white">Generate Resume</span>
                  </div>
                </div>
                <div class="p-3">
                  <div class="text-xs text-gray-500 mb-1">OpenAI</div>
                  <div class="flex items-center justify-between text-xs">
                    <span class="text-indigo-400">3 inputs</span>
                    <span class="text-emerald-400">1 output</span>
                  </div>
                </div>
                <!-- Output handle -->
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Node: Step 3 - Send -->
              <div class="absolute left-[760px] top-[400px] w-[200px] bg-[#12121f] rounded-xl border border-[#2a2a4a] hover:border-indigo-500 transition-colors cursor-pointer shadow-xl">
                <!-- Input handle -->
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üìß</span>
                    <span class="text-sm font-medium text-white">Send Email</span>
                  </div>
                </div>
                <div class="p-3">
                  <div class="text-xs text-gray-500 mb-1">Gmail</div>
                  <div class="flex items-center justify-between text-xs">
                    <span class="text-indigo-400">2 inputs</span>
                    <span class="text-emerald-400">1 output</span>
                  </div>
                </div>
              </div>
              
              <!-- Zoom controls -->
              <div class="absolute bottom-4 right-4 flex flex-col gap-2">
                <button class="w-10 h-10 bg-[#1a1a2e] hover:bg-[#252538] rounded-lg flex items-center justify-center text-gray-400">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                </button>
                <button class="w-10 h-10 bg-[#1a1a2e] hover:bg-[#252538] rounded-lg flex items-center justify-center text-gray-400">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/></svg>
                </button>
                <button class="w-10 h-10 bg-[#1a1a2e] hover:bg-[#252538] rounded-lg flex items-center justify-center text-gray-400">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"/></svg>
                </button>
              </div>
              
              <!-- Mini map -->
              <div class="absolute bottom-4 left-4 w-32 h-24 bg-[#1a1a2e] rounded-lg border border-[#2a2a4a] p-2">
                <div class="w-full h-full relative">
                  <div class="absolute w-2 h-2 bg-indigo-500 rounded-sm" style="left: 10%; top: 20%"></div>
                  <div class="absolute w-2 h-2 bg-indigo-500 rounded-sm" style="left: 40%; top: 50%"></div>
                  <div class="absolute w-2 h-2 bg-indigo-500 rounded-sm" style="left: 70%; top: 70%"></div>
                  <div class="absolute w-8 h-6 border border-white/30 rounded" style="left: 20%; top: 30%"></div>
                </div>
              </div>
            </main>
            
            <!-- Right: Tools Panel -->
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Test</button>
              </div>
              <div class="p-4">
                <div class="relative mb-4">
                  <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                  <input type="text" placeholder="Search or drag tools..." class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-500" />
                </div>
                
                <p class="text-xs text-gray-500 mb-4 text-center">Drag tools onto the canvas to add steps</p>
                
                <div class="space-y-4">
                  <div>
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Web Scraping</h4>
                    <div class="space-y-1">
                      <button class="w-full text-left px-3 py-2 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-sm text-gray-300 flex items-center gap-2 cursor-grab">
                        <span>üîç</span> Scrape Page
                      </button>
                    </div>
                  </div>
                  <div>
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Control Flow</h4>
                    <div class="space-y-1">
                      <button class="w-full text-left px-3 py-2 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-sm text-gray-300 flex items-center gap-2 cursor-grab">
                        <span>üîÄ</span> Branch (If/Else)
                      </button>
                      <button class="w-full text-left px-3 py-2 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-sm text-gray-300 flex items-center gap-2 cursor-grab">
                        <span>‚è∏Ô∏è</span> Parallel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Infinite canvas with dot grid background for visual reference</li>
            <li>‚Ä¢ Nodes are draggable with connection handles on edges</li>
            <li>‚Ä¢ Bezier curves show data flow between steps</li>
            <li>‚Ä¢ Mini-map in corner for navigation in complex workflows</li>
            <li>‚Ä¢ Zoom controls for detailed editing or overview</li>
            <li>‚Ä¢ Same right panel as List view - consistent interaction model</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- SECTION 4: STEP SELECTED -->
    <section id="state-step-selected" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 4 of 20</span>
            <span class="text-xs text-gray-500">Core Editing</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Step Selected</h2>
          <p class="text-gray-400 mt-2">When a step is selected, the right panel shows step-specific configuration options.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Canvas</button>
              </div>
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- Left: Collapsed AI -->
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <!-- Center: Canvas with selected node -->
            <main class="flex-1 bg-[#0a0a14] canvas-dots relative">
              <svg class="absolute inset-0 w-full h-full pointer-events-none">
                <path d="M 280 150 C 350 150, 350 300, 420 300" class="connection-line" />
                <path d="M 620 300 C 690 300, 690 450, 760 450" class="connection-line" />
              </svg>
              
              <!-- Node 1 -->
              <div class="absolute left-[80px] top-[100px] w-[200px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üî•</span>
                    <span class="text-sm font-medium text-white">Scrape Job</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Firecrawl</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Node 2 - SELECTED -->
              <div class="absolute left-[420px] top-[250px] w-[200px] bg-[#12121f] rounded-xl border-2 border-indigo-500 shadow-xl ring-4 ring-indigo-500/20">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">ü§ñ</span>
                    <span class="text-sm font-medium text-white">Generate Resume</span>
                  </div>
                </div>
                <div class="p-3">
                  <div class="text-xs text-gray-500 mb-1">OpenAI</div>
                  <div class="flex items-center justify-between text-xs">
                    <span class="text-indigo-400">3 inputs</span>
                    <span class="text-emerald-400">1 output</span>
                  </div>
                </div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Node 3 -->
              <div class="absolute left-[760px] top-[400px] w-[200px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üìß</span>
                    <span class="text-sm font-medium text-white">Send Email</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Gmail</div>
              </div>
            </main>
            
            <!-- Right: Step Configuration Panel -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <!-- Step header -->
              <div class="p-4 border-b border-[#1a1a2e]">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center gap-2">
                    <span class="text-2xl">ü§ñ</span>
                    <div>
                      <h3 class="font-semibold text-white">Generate Resume</h3>
                      <p class="text-xs text-gray-500">OpenAI ‚Ä¢ Chat Completion</p>
                    </div>
                  </div>
                  <button class="text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              
              <!-- Step config tabs -->
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-3 py-2.5 text-xs font-medium text-indigo-400 border-b-2 border-indigo-500">Input Mapping</button>
                <button class="flex-1 px-3 py-2.5 text-xs font-medium text-gray-500">Config</button>
                <button class="flex-1 px-3 py-2.5 text-xs font-medium text-gray-500">Output</button>
                <button class="flex-1 px-3 py-2.5 text-xs font-medium text-gray-500">Test</button>
              </div>
              
              <!-- Input mapping content -->
              <div class="p-4 overflow-y-auto" style="max-height: 450px;">
                <p class="text-xs text-gray-500 mb-4">Map outputs from previous steps to this step's inputs.</p>
                
                <!-- Input field 1 -->
                <div class="mb-4 p-3 bg-[#1a1a2e] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <label class="text-sm font-medium text-white">jobTitle <span class="text-red-400">*</span></label>
                    <span class="text-xs text-emerald-400">‚úì Mapped</span>
                  </div>
                  <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white">
                    <option>Step 1 ‚Üí data.title</option>
                    <option>Step 1 ‚Üí data.company</option>
                    <option>Runtime Input ‚Üí jobTitle</option>
                  </select>
                </div>
                
                <!-- Input field 2 -->
                <div class="mb-4 p-3 bg-[#1a1a2e] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <label class="text-sm font-medium text-white">requirements <span class="text-red-400">*</span></label>
                    <span class="text-xs text-emerald-400">‚úì Mapped</span>
                  </div>
                  <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white">
                    <option>Step 1 ‚Üí data.requirements</option>
                  </select>
                </div>
                
                <!-- Input field 3 -->
                <div class="mb-4 p-3 bg-[#1a1a2e] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <label class="text-sm font-medium text-white">baseResume <span class="text-red-400">*</span></label>
                    <span class="text-xs text-emerald-400">‚úì Mapped</span>
                  </div>
                  <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white">
                    <option>Runtime Input ‚Üí baseResume</option>
                  </select>
                </div>
                
                <!-- Actions -->
                <div class="flex gap-2 mt-6">
                  <button class="flex-1 px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg">
                    Edit Mapping Code
                  </button>
                  <button class="flex-1 px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">
                    Test This Step
                  </button>
                </div>
                
                <!-- Delete step -->
                <button class="w-full mt-4 px-4 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg border border-red-500/20">
                  Remove Step
                </button>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Selected node has prominent visual indicator (ring + border)</li>
            <li>‚Ä¢ Right panel transforms to show step-specific configuration</li>
            <li>‚Ä¢ Input mapping uses dropdowns to select data sources</li>
            <li>‚Ä¢ Visual indicators show mapping status (‚úì Mapped)</li>
            <li>‚Ä¢ Quick actions: test step individually, edit mapping code, remove</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 5: BRANCH (IF/ELSE) -->
    <!-- ========================================== -->
    <section id="state-branch" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 5 of 20</span>
            <span class="text-xs text-gray-500">Control Flow</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Branch (If/Else) Configuration</h2>
          <p class="text-gray-400 mt-2">Configure conditional branching to take different paths based on data conditions.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Lead Qualification Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">Canvas</button>
              </div>
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- Left collapsed -->
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <!-- Center: Canvas with Branch -->
            <main class="flex-1 bg-[#0a0a14] canvas-dots relative overflow-hidden">
              <svg class="absolute inset-0 w-full h-full pointer-events-none">
                <!-- Input to Branch -->
                <path d="M 230 200 L 350 200" class="connection-line" />
                <!-- Branch to High Priority -->
                <path d="M 550 160 C 620 160, 620 100, 700 100" stroke="#22c55e" stroke-width="2" fill="none" />
                <!-- Branch to Low Priority -->
                <path d="M 550 240 C 620 240, 620 300, 700 300" stroke="#f59e0b" stroke-width="2" fill="none" />
              </svg>
              
              <!-- Input Node -->
              <div class="absolute left-[50px] top-[150px] w-[180px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üì•</span>
                    <span class="text-sm font-medium text-white">Get Lead Data</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">CRM API</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Branch Node - Selected -->
              <div class="absolute left-[350px] top-[130px] w-[200px] bg-[#12121f] rounded-xl border-2 border-amber-500 shadow-xl ring-4 ring-amber-500/20">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a] bg-amber-500/10">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üîÄ</span>
                    <span class="text-sm font-medium text-white">Priority Check</span>
                  </div>
                </div>
                <div class="p-3">
                  <div class="text-xs text-amber-400 mb-2">Branch Node</div>
                  <div class="space-y-1 text-xs">
                    <div class="flex items-center gap-1">
                      <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                      <span class="text-gray-400">If high priority ‚Üí</span>
                    </div>
                    <div class="flex items-center gap-1">
                      <span class="w-2 h-2 bg-amber-500 rounded-full"></span>
                      <span class="text-gray-400">Else ‚Üí</span>
                    </div>
                  </div>
                </div>
                <!-- Multiple output handles -->
                <div class="absolute -right-2 top-[35%] w-4 h-4 bg-green-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="absolute -right-2 top-[65%] w-4 h-4 bg-amber-500 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- High Priority Path -->
              <div class="absolute left-[700px] top-[50px] w-[180px] bg-[#12121f] rounded-xl border border-green-500/50 shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-green-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üìû</span>
                    <span class="text-sm font-medium text-white">Schedule Call</span>
                  </div>
                </div>
                <div class="p-3">
                  <span class="px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">High Priority</span>
                </div>
              </div>
              
              <!-- Low Priority Path -->
              <div class="absolute left-[700px] top-[250px] w-[180px] bg-[#12121f] rounded-xl border border-amber-500/50 shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-amber-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üìß</span>
                    <span class="text-sm font-medium text-white">Send Email</span>
                  </div>
                </div>
                <div class="p-3">
                  <span class="px-2 py-0.5 text-xs bg-amber-500/20 text-amber-400 rounded">Standard</span>
                </div>
              </div>
            </main>
            
            <!-- Right: Branch Configuration -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="p-4 border-b border-[#1a1a2e]">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <span class="text-2xl">üîÄ</span>
                    <div>
                      <h3 class="font-semibold text-white">Branch Configuration</h3>
                      <p class="text-xs text-gray-500">Priority Check</p>
                    </div>
                  </div>
                  <button class="text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
              </div>
              
              <div class="p-4 overflow-y-auto" style="max-height: 500px;">
                <p class="text-xs text-gray-500 mb-4">Define conditions for each branch path. First matching condition wins.</p>
                
                <!-- Branch 1: High Priority -->
                <div class="mb-4 p-4 bg-[#1a1a2e] rounded-lg border-l-4 border-green-500">
                  <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-2">
                      <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      <span class="text-sm font-medium text-white">Branch 1: High Priority</span>
                    </div>
                    <button class="text-gray-500 hover:text-red-400">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                    </button>
                  </div>
                  <label class="text-xs text-gray-400 mb-1 block">Condition</label>
                  <textarea class="w-full bg-[#12121f] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white font-mono h-20 resize-none">async ({ inputData }) => {
  return inputData.leadScore >= 80;
}</textarea>
                  <div class="mt-2 flex items-center gap-2">
                    <span class="text-xs text-gray-500">Then execute:</span>
                    <span class="px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">Schedule Call</span>
                  </div>
                </div>
                
                <!-- Branch 2: Else (Default) -->
                <div class="mb-4 p-4 bg-[#1a1a2e] rounded-lg border-l-4 border-amber-500">
                  <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-2">
                      <span class="w-3 h-3 bg-amber-500 rounded-full"></span>
                      <span class="text-sm font-medium text-white">Else (Default)</span>
                    </div>
                  </div>
                  <p class="text-xs text-gray-400 mb-2">Executes if no other conditions match</p>
                  <div class="flex items-center gap-2">
                    <span class="text-xs text-gray-500">Then execute:</span>
                    <span class="px-2 py-0.5 text-xs bg-amber-500/20 text-amber-400 rounded">Send Email</span>
                  </div>
                </div>
                
                <!-- Add Branch -->
                <button class="w-full px-4 py-2 text-sm border border-dashed border-[#2a2a4a] hover:border-indigo-500 text-gray-400 hover:text-white rounded-lg flex items-center justify-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                  Add Another Branch
                </button>
                
                <!-- Mastra code preview -->
                <div class="mt-6 p-3 bg-[#0a0a14] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-xs text-gray-500">Generated Mastra Code</span>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">Copy</button>
                  </div>
                  <pre class="text-xs text-gray-400 font-mono overflow-x-auto"><code>.branch([
  [condition1, scheduleCall],
  [() => true, sendEmail]
])</code></pre>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Branch nodes have multiple colored output handles for each path</li>
            <li>‚Ä¢ Color-coded paths (green for high priority, amber for default)</li>
            <li>‚Ä¢ Condition editor supports TypeScript with syntax highlighting</li>
            <li>‚Ä¢ Shows generated Mastra code for transparency</li>
            <li>‚Ä¢ Maps directly to Mastra's <code>.branch([[condition, step], ...])</code> primitive</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 6: PARALLEL BRANCHES -->
    <!-- ========================================== -->
    <section id="state-parallel" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 6 of 20</span>
            <span class="text-xs text-gray-500">Control Flow</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Parallel Branches</h2>
          <p class="text-gray-400 mt-2">Execute multiple steps simultaneously and wait for all to complete.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Multi-Channel Notification" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">Canvas</button>
              </div>
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] canvas-dots relative overflow-hidden">
              <svg class="absolute inset-0 w-full h-full pointer-events-none">
                <!-- Trigger to Fork -->
                <path d="M 230 300 L 320 300" class="connection-line" />
                <!-- Fork to Parallel Steps -->
                <path d="M 520 250 L 620 100" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="5,5" />
                <path d="M 520 300 L 620 300" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="5,5" />
                <path d="M 520 350 L 620 500" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="5,5" />
                <!-- Parallel Steps to Join -->
                <path d="M 820 100 L 920 250" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="5,5" />
                <path d="M 820 300 L 920 300" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="5,5" />
                <path d="M 820 500 L 920 350" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="5,5" />
              </svg>
              
              <!-- Trigger -->
              <div class="absolute left-[50px] top-[250px] w-[180px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üîî</span>
                    <span class="text-sm font-medium text-white">New Alert</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Webhook Trigger</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Parallel Fork Node - Selected -->
              <div class="absolute left-[320px] top-[220px] w-[200px] bg-[#12121f] rounded-xl border-2 border-purple-500 shadow-xl ring-4 ring-purple-500/20">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a] bg-purple-500/10">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">‚è∏Ô∏è</span>
                    <span class="text-sm font-medium text-white">Parallel Start</span>
                  </div>
                </div>
                <div class="p-3">
                  <div class="text-xs text-purple-400 mb-2">Fork into 3 branches</div>
                  <div class="flex flex-wrap gap-1">
                    <span class="px-1.5 py-0.5 text-xs bg-purple-500/20 text-purple-300 rounded">Email</span>
                    <span class="px-1.5 py-0.5 text-xs bg-purple-500/20 text-purple-300 rounded">Slack</span>
                    <span class="px-1.5 py-0.5 text-xs bg-purple-500/20 text-purple-300 rounded">SMS</span>
                  </div>
                </div>
                <div class="absolute -right-2 top-[25%] w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="absolute -right-2 top-[50%] w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="absolute -right-2 top-[75%] w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Parallel Step 1: Email -->
              <div class="absolute left-[620px] top-[50px] w-[200px] bg-[#12121f] rounded-xl border border-purple-500/30 shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üìß</span>
                    <span class="text-sm font-medium text-white">Send Email</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Gmail</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Parallel Step 2: Slack -->
              <div class="absolute left-[620px] top-[250px] w-[200px] bg-[#12121f] rounded-xl border border-purple-500/30 shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üí¨</span>
                    <span class="text-sm font-medium text-white">Post to Slack</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Slack</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Parallel Step 3: SMS -->
              <div class="absolute left-[620px] top-[450px] w-[200px] bg-[#12121f] rounded-xl border border-purple-500/30 shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üì±</span>
                    <span class="text-sm font-medium text-white">Send SMS</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Twilio</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Join Node -->
              <div class="absolute left-[920px] top-[220px] w-[180px] bg-[#12121f] rounded-xl border border-purple-500/30 shadow-xl">
                <div class="absolute -left-2 top-[25%] w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="absolute -left-2 top-[50%] w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="absolute -left-2 top-[75%] w-4 h-4 bg-purple-500 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a] bg-purple-500/10">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">‚è∏Ô∏è</span>
                    <span class="text-sm font-medium text-white">Wait for All</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-purple-400">Joins parallel branches</div>
              </div>
            </main>
            
            <!-- Right: Parallel Config -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="p-4 border-b border-[#1a1a2e]">
                <div class="flex items-center gap-2">
                  <span class="text-2xl">‚è∏Ô∏è</span>
                  <div>
                    <h3 class="font-semibold text-white">Parallel Configuration</h3>
                    <p class="text-xs text-gray-500">Execute steps simultaneously</p>
                  </div>
                </div>
              </div>
              
              <div class="p-4">
                <div class="mb-4 p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg">
                  <p class="text-xs text-purple-300">
                    <strong>Parallel execution</strong> runs all branches at the same time. The workflow continues after all branches complete.
                  </p>
                </div>
                
                <h4 class="text-sm font-medium text-white mb-3">Parallel Branches</h4>
                
                <!-- Branch list -->
                <div class="space-y-2 mb-4">
                  <div class="flex items-center gap-3 p-2 bg-[#1a1a2e] rounded-lg">
                    <span class="text-lg">üìß</span>
                    <div class="flex-1">
                      <span class="text-sm text-white">Send Email</span>
                      <p class="text-xs text-gray-500">Gmail</p>
                    </div>
                    <button class="text-gray-500 hover:text-white">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/></svg>
                    </button>
                  </div>
                  <div class="flex items-center gap-3 p-2 bg-[#1a1a2e] rounded-lg">
                    <span class="text-lg">üí¨</span>
                    <div class="flex-1">
                      <span class="text-sm text-white">Post to Slack</span>
                      <p class="text-xs text-gray-500">Slack</p>
                    </div>
                    <button class="text-gray-500 hover:text-white">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/></svg>
                    </button>
                  </div>
                  <div class="flex items-center gap-3 p-2 bg-[#1a1a2e] rounded-lg">
                    <span class="text-lg">üì±</span>
                    <div class="flex-1">
                      <span class="text-sm text-white">Send SMS</span>
                      <p class="text-xs text-gray-500">Twilio</p>
                    </div>
                    <button class="text-gray-500 hover:text-white">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/></svg>
                    </button>
                  </div>
                </div>
                
                <button class="w-full px-4 py-2 text-sm border border-dashed border-[#2a2a4a] hover:border-purple-500 text-gray-400 hover:text-white rounded-lg">
                  + Add Parallel Branch
                </button>
                
                <!-- Generated code -->
                <div class="mt-6 p-3 bg-[#0a0a14] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-xs text-gray-500">Generated Mastra Code</span>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">Copy</button>
                  </div>
                  <pre class="text-xs text-gray-400 font-mono"><code>.parallel([
  sendEmail,
  postToSlack,
  sendSms
])</code></pre>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Visual fork/join pattern shows parallel execution clearly</li>
            <li>‚Ä¢ Dashed lines indicate parallel paths (not sequential)</li>
            <li>‚Ä¢ Purple color coding for parallel-related nodes</li>
            <li>‚Ä¢ Maps to Mastra's <code>.parallel([step1, step2, ...])</code> primitive</li>
            <li>‚Ä¢ Join node shows where all branches reconverge</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 7: LOOP (WHILE/UNTIL) -->
    <!-- ========================================== -->
    <section id="state-loop" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 7 of 20</span>
            <span class="text-xs text-gray-500">Control Flow</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Loop (While/Until)</h2>
          <p class="text-gray-400 mt-2">Repeat steps until a condition is met. Supports dowhile, dountil, and foreach patterns.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Batch Processing Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">List</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-[#252538] text-white">Canvas</button>
              </div>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] canvas-dots relative overflow-hidden">
              <svg class="absolute inset-0 w-full h-full pointer-events-none">
                <!-- Start to Loop -->
                <path d="M 230 200 L 350 200" class="connection-line" />
                <!-- Loop internal -->
                <path d="M 550 200 L 650 200" stroke="#10b981" stroke-width="2" fill="none" />
                <!-- Loop back arrow -->
                <path d="M 780 250 Q 780 350 565 350 Q 350 350 350 250" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,5" />
                <!-- Exit loop -->
                <path d="M 850 200 L 950 200" class="connection-line" />
              </svg>
              
              <!-- Start -->
              <div class="absolute left-[50px] top-[150px] w-[180px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üìä</span>
                    <span class="text-sm font-medium text-white">Get Records</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Database Query</div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
              </div>
              
              <!-- Loop Container -->
              <div class="absolute left-[330px] top-[100px] w-[540px] h-[200px] border-2 border-dashed border-emerald-500/50 rounded-2xl bg-emerald-500/5">
                <div class="absolute -top-3 left-4 px-2 bg-[#0a0a14]">
                  <span class="text-xs text-emerald-400 font-medium">üîÅ Loop: For Each Record</span>
                </div>
                
                <!-- Loop Start Node -->
                <div class="absolute left-[20px] top-[50px] w-[180px] bg-[#12121f] rounded-xl border-2 border-emerald-500 shadow-xl ring-4 ring-emerald-500/20">
                  <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                  <div class="p-3 border-b border-[#2a2a4a] bg-emerald-500/10">
                    <div class="flex items-center gap-2">
                      <span class="text-lg">üîÅ</span>
                      <span class="text-sm font-medium text-white">Loop Start</span>
                    </div>
                  </div>
                  <div class="p-3">
                    <div class="text-xs text-emerald-400">Iteration: <code>item</code></div>
                  </div>
                  <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-emerald-500 rounded-full border-2 border-[#12121f]"></div>
                </div>
                
                <!-- Process Step inside Loop -->
                <div class="absolute left-[300px] top-[50px] w-[180px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                  <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-emerald-500 rounded-full border-2 border-[#12121f]"></div>
                  <div class="p-3 border-b border-[#2a2a4a]">
                    <div class="flex items-center gap-2">
                      <span class="text-lg">‚öôÔ∏è</span>
                      <span class="text-sm font-medium text-white">Process Item</span>
                    </div>
                  </div>
                  <div class="p-3 text-xs text-gray-500">Transform Data</div>
                  <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-emerald-500 rounded-full border-2 border-[#12121f]"></div>
                </div>
              </div>
              
              <!-- After Loop -->
              <div class="absolute left-[950px] top-[150px] w-[180px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-xl">
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-600 rounded-full border-2 border-[#12121f]"></div>
                <div class="p-3 border-b border-[#2a2a4a]">
                  <div class="flex items-center gap-2">
                    <span class="text-lg">üì§</span>
                    <span class="text-sm font-medium text-white">Save Results</span>
                  </div>
                </div>
                <div class="p-3 text-xs text-gray-500">Database Write</div>
              </div>
            </main>
            
            <!-- Right: Loop Config -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="p-4 border-b border-[#1a1a2e]">
                <div class="flex items-center gap-2">
                  <span class="text-2xl">üîÅ</span>
                  <div>
                    <h3 class="font-semibold text-white">Loop Configuration</h3>
                    <p class="text-xs text-gray-500">Repeat steps based on condition</p>
                  </div>
                </div>
              </div>
              
              <div class="p-4">
                <!-- Loop Type -->
                <div class="mb-4">
                  <label class="text-xs text-gray-400 mb-2 block">Loop Type</label>
                  <select class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white">
                    <option value="foreach" selected>For Each (iterate array)</option>
                    <option value="dowhile">Do While (check after)</option>
                    <option value="dountil">Do Until (check after)</option>
                  </select>
                </div>
                
                <!-- For Each Config -->
                <div class="mb-4 p-3 bg-[#1a1a2e] rounded-lg">
                  <label class="text-xs text-gray-400 mb-2 block">Iterate Over</label>
                  <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white mb-3">
                    <option>Step 1 ‚Üí records (array)</option>
                    <option>Runtime Input ‚Üí items</option>
                  </select>
                  
                  <label class="text-xs text-gray-400 mb-2 block">Current Item Variable</label>
                  <input type="text" value="item" class="w-full bg-[#12121f] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white font-mono" />
                </div>
                
                <!-- Max Iterations (safety) -->
                <div class="mb-4">
                  <label class="text-xs text-gray-400 mb-2 block">Max Iterations (safety limit)</label>
                  <input type="number" value="100" class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white" />
                </div>
                
                <!-- Loop Body -->
                <div class="mb-4">
                  <label class="text-xs text-gray-400 mb-2 block">Steps in Loop</label>
                  <div class="space-y-2">
                    <div class="flex items-center gap-2 p-2 bg-[#1a1a2e] rounded-lg">
                      <span class="text-gray-500">1.</span>
                      <span class="text-lg">‚öôÔ∏è</span>
                      <span class="text-sm text-white">Process Item</span>
                    </div>
                  </div>
                  <button class="mt-2 w-full px-4 py-2 text-xs border border-dashed border-[#2a2a4a] hover:border-emerald-500 text-gray-400 hover:text-white rounded-lg">
                    + Add Step to Loop
                  </button>
                </div>
                
                <!-- Generated code -->
                <div class="mt-4 p-3 bg-[#0a0a14] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-xs text-gray-500">Generated Mastra Code</span>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">Copy</button>
                  </div>
                  <pre class="text-xs text-gray-400 font-mono overflow-x-auto"><code>getRecords
  .foreach(
    processItem,
    { getItems: ({ result }) => result.records }
  )
  .then(saveResults)</code></pre>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Visual loop container with dashed border shows iteration scope</li>
            <li>‚Ä¢ Loop-back arrow indicates repetition</li>
            <li>‚Ä¢ Green color coding for loop-related elements</li>
            <li>‚Ä¢ Supports foreach, dowhile, and dountil patterns</li>
            <li>‚Ä¢ Safety limit prevents infinite loops</li>
            <li>‚Ä¢ Maps to Mastra's <code>.foreach()</code>, <code>.dowhile()</code>, <code>.dountil()</code> primitives</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 8: TOOLS TAB -->
    <!-- ========================================== -->
    <section id="state-tools-tab" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 8 of 20</span>
            <span class="text-xs text-gray-500">Panel States</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Tools Tab - Expanded</h2>
          <p class="text-gray-400 mt-2">Full tool palette with search, categories, and drag-to-add functionality.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="My Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <p class="text-gray-500">[Workflow Canvas Area]</p>
            </main>
            
            <!-- Right: Tools Tab Active -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Connect</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Test</button>
              </div>
              
              <div class="p-4 overflow-y-auto" style="max-height: 540px;">
                <!-- Search with filter -->
                <div class="flex gap-2 mb-4">
                  <div class="relative flex-1">
                    <svg class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                    <input type="text" value="gmail" placeholder="Search tools..." class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-gray-500" />
                  </div>
                  <button class="px-3 py-2 bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg text-gray-400 hover:text-white">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/></svg>
                  </button>
                </div>
                
                <!-- Search Results -->
                <div class="mb-4">
                  <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Results for "gmail"</h4>
                  <div class="space-y-2">
                    <button class="w-full text-left p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] border border-transparent hover:border-indigo-500/50 transition-colors group cursor-grab">
                      <div class="flex items-center gap-3">
                        <span class="text-2xl">üì§</span>
                        <div class="flex-1">
                          <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-white">Send Email</span>
                            <span class="px-1.5 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">Gmail</span>
                          </div>
                          <p class="text-xs text-gray-500 mt-0.5">GMAIL_SEND_EMAIL</p>
                        </div>
                        <span class="text-xs text-gray-500 opacity-0 group-hover:opacity-100">Drag ‚Üí</span>
                      </div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] border border-transparent hover:border-indigo-500/50 transition-colors group cursor-grab">
                      <div class="flex items-center gap-3">
                        <span class="text-2xl">üì•</span>
                        <div class="flex-1">
                          <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-white">Read Email</span>
                            <span class="px-1.5 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">Gmail</span>
                          </div>
                          <p class="text-xs text-gray-500 mt-0.5">GMAIL_GET_EMAIL</p>
                        </div>
                        <span class="text-xs text-gray-500 opacity-0 group-hover:opacity-100">Drag ‚Üí</span>
                      </div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] border border-transparent hover:border-indigo-500/50 transition-colors group cursor-grab">
                      <div class="flex items-center gap-3">
                        <span class="text-2xl">üîç</span>
                        <div class="flex-1">
                          <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-white">Search Emails</span>
                            <span class="px-1.5 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">Gmail</span>
                          </div>
                          <p class="text-xs text-gray-500 mt-0.5">GMAIL_SEARCH</p>
                        </div>
                        <span class="text-xs text-gray-500 opacity-0 group-hover:opacity-100">Drag ‚Üí</span>
                      </div>
                    </button>
                    <button class="w-full text-left p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] border border-transparent hover:border-indigo-500/50 transition-colors group cursor-grab">
                      <div class="flex items-center gap-3">
                        <span class="text-2xl">üè∑Ô∏è</span>
                        <div class="flex-1">
                          <div class="flex items-center gap-2">
                            <span class="text-sm font-medium text-white">Add Label</span>
                            <span class="px-1.5 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">Gmail</span>
                          </div>
                          <p class="text-xs text-gray-500 mt-0.5">GMAIL_ADD_LABEL</p>
                        </div>
                        <span class="text-xs text-gray-500 opacity-0 group-hover:opacity-100">Drag ‚Üí</span>
                      </div>
                    </button>
                  </div>
                </div>
                
                <!-- Divider -->
                <div class="border-t border-[#1a1a2e] my-4"></div>
                
                <!-- Control Flow -->
                <div>
                  <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Control Flow</h4>
                  <div class="grid grid-cols-3 gap-2">
                    <button class="p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-center cursor-grab">
                      <span class="text-2xl block mb-1">üîÄ</span>
                      <span class="text-xs text-gray-400">Branch</span>
                    </button>
                    <button class="p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-center cursor-grab">
                      <span class="text-2xl block mb-1">‚è∏Ô∏è</span>
                      <span class="text-xs text-gray-400">Parallel</span>
                    </button>
                    <button class="p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-center cursor-grab">
                      <span class="text-2xl block mb-1">üîÅ</span>
                      <span class="text-xs text-gray-400">Loop</span>
                    </button>
                  </div>
                </div>
                
                <!-- Custom Code -->
                <div class="mt-4">
                  <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Custom</h4>
                  <button class="w-full p-3 rounded-lg bg-[#1a1a2e] hover:bg-[#252538] text-left cursor-grab">
                    <div class="flex items-center gap-3">
                      <span class="text-2xl">üìú</span>
                      <div>
                        <span class="text-sm font-medium text-white">Code Block</span>
                        <p class="text-xs text-gray-500">Write custom TypeScript</p>
                      </div>
                    </div>
                  </button>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Search filters tools in real-time</li>
            <li>‚Ä¢ Tool cards show action name, integration, and technical ID</li>
            <li>‚Ä¢ Drag hint appears on hover</li>
            <li>‚Ä¢ Control flow nodes in compact grid</li>
            <li>‚Ä¢ Custom code option for advanced users</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 9: INPUTS TAB -->
    <!-- ========================================== -->
    <section id="state-inputs-tab" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 9 of 20</span>
            <span class="text-xs text-gray-500">Panel States</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Inputs Tab</h2>
          <p class="text-gray-400 mt-2">Define runtime inputs that users provide when triggering the workflow.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <p class="text-gray-500">[Workflow Canvas Area]</p>
            </main>
            
            <!-- Right: Inputs Tab Active -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Connect</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-300">Test</button>
              </div>
              
              <div class="p-4 overflow-y-auto" style="max-height: 540px;">
                <p class="text-xs text-gray-500 mb-4">Define inputs that users provide when running this workflow. These become available in your first step.</p>
                
                <!-- Input 1 -->
                <div class="mb-4 p-4 bg-[#1a1a2e] rounded-lg">
                  <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-2">
                      <svg class="w-4 h-4 text-gray-500 cursor-grab" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg>
                      <span class="text-sm font-medium text-white">jobUrl</span>
                      <span class="text-xs text-red-400">*</span>
                    </div>
                    <button class="text-gray-500 hover:text-red-400">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                    </button>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-3 mb-3">
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Type</label>
                      <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white">
                        <option selected>string</option>
                        <option>number</option>
                        <option>boolean</option>
                        <option>array</option>
                        <option>object</option>
                      </select>
                    </div>
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Required</label>
                      <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white">
                        <option selected>Yes</option>
                        <option>No</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="mb-3">
                    <label class="text-xs text-gray-400 block mb-1">Description</label>
                    <input type="text" value="URL of the job listing to scrape" class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white" />
                  </div>
                  
                  <div>
                    <label class="text-xs text-gray-400 block mb-1">Default Value (optional)</label>
                    <input type="text" placeholder="e.g., https://example.com/job/123" class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white placeholder-gray-600" />
                  </div>
                </div>
                
                <!-- Input 2 -->
                <div class="mb-4 p-4 bg-[#1a1a2e] rounded-lg">
                  <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-2">
                      <svg class="w-4 h-4 text-gray-500 cursor-grab" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg>
                      <span class="text-sm font-medium text-white">baseResume</span>
                      <span class="text-xs text-red-400">*</span>
                    </div>
                    <button class="text-gray-500 hover:text-red-400">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
                    </button>
                  </div>
                  
                  <div class="grid grid-cols-2 gap-3 mb-3">
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Type</label>
                      <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white">
                        <option selected>string</option>
                      </select>
                    </div>
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Required</label>
                      <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white">
                        <option selected>Yes</option>
                      </select>
                    </div>
                  </div>
                  
                  <div>
                    <label class="text-xs text-gray-400 block mb-1">Description</label>
                    <input type="text" value="User's base resume content to tailor" class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1.5 text-sm text-white" />
                  </div>
                </div>
                
                <!-- Add Input Button -->
                <button class="w-full px-4 py-3 text-sm border border-dashed border-[#2a2a4a] hover:border-indigo-500 text-gray-400 hover:text-white rounded-lg flex items-center justify-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                  Add Runtime Input
                </button>
                
                <!-- Generated Schema Preview -->
                <div class="mt-6 p-3 bg-[#0a0a14] rounded-lg">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-xs text-gray-500">Generated Input Schema</span>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">Copy</button>
                  </div>
                  <pre class="text-xs text-gray-400 font-mono overflow-x-auto"><code>z.object({
  jobUrl: z.string(),
  baseResume: z.string()
})</code></pre>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Each input has: name, type, required flag, description, default value</li>
            <li>‚Ä¢ Drag handle for reordering inputs</li>
            <li>‚Ä¢ Shows generated Zod schema for transparency</li>
            <li>‚Ä¢ These inputs become the trigger schema for the workflow</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 10: CONFIG TAB -->
    <!-- ========================================== -->
    <section id="state-config-tab" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 10 of 20</span>
            <span class="text-xs text-gray-500">Panel States</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Config Tab</h2>
          <p class="text-gray-400 mt-2">Workflow-level configuration options and global settings with defaults.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <p class="text-gray-500">[Workflow Canvas Area]</p>
            </main>
            
            <!-- Right: Config Tab Active -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Connect</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Test</button>
              </div>
              
              <div class="p-4 overflow-y-auto" style="max-height: 540px;">
                <p class="text-xs text-gray-500 mb-4">Configure workflow-level settings and default values.</p>
                
                <!-- Workflow Metadata -->
                <div class="mb-6">
                  <h4 class="text-sm font-medium text-white mb-3">Workflow Metadata</h4>
                  
                  <div class="space-y-3">
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Display Name</label>
                      <input type="text" value="Job Application Workflow" class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white" />
                    </div>
                    
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Description</label>
                      <textarea class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white h-20 resize-none">Automatically scrape job listings, generate tailored resumes, and send application emails.</textarea>
                    </div>
                    
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Tags</label>
                      <div class="flex flex-wrap gap-2">
                        <span class="px-2 py-1 text-xs bg-[#1a1a2e] text-gray-300 rounded flex items-center gap-1">
                          recruitment
                          <button class="text-gray-500 hover:text-white">√ó</button>
                        </span>
                        <span class="px-2 py-1 text-xs bg-[#1a1a2e] text-gray-300 rounded flex items-center gap-1">
                          automation
                          <button class="text-gray-500 hover:text-white">√ó</button>
                        </span>
                        <button class="px-2 py-1 text-xs text-indigo-400 hover:text-indigo-300">+ Add</button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Execution Settings -->
                <div class="mb-6">
                  <h4 class="text-sm font-medium text-white mb-3">Execution Settings</h4>
                  
                  <div class="space-y-3">
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Timeout (seconds)</label>
                      <input type="number" value="300" class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white" />
                      <p class="text-xs text-gray-600 mt-1">Maximum execution time before timeout</p>
                    </div>
                    
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">Retry on Failure</label>
                      <select class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white">
                        <option>No retry</option>
                        <option selected>1 retry</option>
                        <option>2 retries</option>
                        <option>3 retries</option>
                      </select>
                    </div>
                    
                    <div class="flex items-center justify-between p-3 bg-[#1a1a2e] rounded-lg">
                      <div>
                        <span class="text-sm text-white">Log step outputs</span>
                        <p class="text-xs text-gray-500">Store intermediate results for debugging</p>
                      </div>
                      <button class="w-11 h-6 bg-indigo-600 rounded-full relative">
                        <span class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full"></span>
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Custom Config Options -->
                <div>
                  <div class="flex items-center justify-between mb-3">
                    <h4 class="text-sm font-medium text-white">Custom Config</h4>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">+ Add Option</button>
                  </div>
                  
                  <!-- Config option -->
                  <div class="p-3 bg-[#1a1a2e] rounded-lg mb-2">
                    <div class="flex items-center justify-between mb-2">
                      <span class="text-sm text-white">outputFormat</span>
                      <button class="text-gray-500 hover:text-red-400 text-xs">Remove</button>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mb-2">
                      <div>
                        <label class="text-xs text-gray-500">Type</label>
                        <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1 text-xs text-white">
                          <option>string</option>
                          <option>number</option>
                          <option selected>select</option>
                        </select>
                      </div>
                      <div>
                        <label class="text-xs text-gray-500">Default</label>
                        <select class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1 text-xs text-white">
                          <option selected>pdf</option>
                          <option>docx</option>
                          <option>markdown</option>
                        </select>
                      </div>
                    </div>
                    <div>
                      <label class="text-xs text-gray-500">Options</label>
                      <input type="text" value="pdf, docx, markdown" class="w-full bg-[#12121f] border border-[#2a2a4a] rounded px-2 py-1 text-xs text-white mt-1" />
                    </div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Workflow metadata: name, description, tags for organization</li>
            <li>‚Ä¢ Execution settings: timeout, retry policy, logging</li>
            <li>‚Ä¢ Custom config options with defaults (user's request)</li>
            <li>‚Ä¢ Config values are accessible in all steps</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 11: CONNECT TAB -->
    <!-- ========================================== -->
    <section id="state-connect-tab" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 11 of 20</span>
            <span class="text-xs text-gray-500">Panel States</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Connect Tab</h2>
          <p class="text-gray-400 mt-2">Manage OAuth connections required by tools in this workflow.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <p class="text-gray-500">[Workflow Canvas Area]</p>
            </main>
            
            <!-- Right: Connect Tab Active -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5">Connect</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Test</button>
              </div>
              
              <div class="p-4 overflow-y-auto" style="max-height: 540px;">
                <p class="text-xs text-gray-500 mb-4">This workflow requires connections to the following integrations.</p>
                
                <!-- Required Connections -->
                <div class="space-y-3">
                  <!-- Gmail - Connected -->
                  <div class="p-4 bg-[#1a1a2e] rounded-lg border border-green-500/30">
                    <div class="flex items-center gap-3">
                      <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-xl">üìß</span>
                      </div>
                      <div class="flex-1">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-white">Gmail</span>
                          <span class="px-1.5 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">Connected</span>
                        </div>
                        <p class="text-xs text-gray-500">user@gmail.com</p>
                      </div>
                      <button class="px-3 py-1.5 text-xs bg-[#12121f] hover:bg-[#252538] text-gray-300 rounded-lg">Manage</button>
                    </div>
                    <div class="mt-3 pt-3 border-t border-[#2a2a4a]">
                      <p class="text-xs text-gray-500">Used by: <span class="text-gray-400">Send Application Email</span></p>
                    </div>
                  </div>
                  
                  <!-- Firecrawl - Connected -->
                  <div class="p-4 bg-[#1a1a2e] rounded-lg border border-green-500/30">
                    <div class="flex items-center gap-3">
                      <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-xl">üî•</span>
                      </div>
                      <div class="flex-1">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-white">Firecrawl</span>
                          <span class="px-1.5 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">Connected</span>
                        </div>
                        <p class="text-xs text-gray-500">API Key: ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢abc123</p>
                      </div>
                      <button class="px-3 py-1.5 text-xs bg-[#12121f] hover:bg-[#252538] text-gray-300 rounded-lg">Manage</button>
                    </div>
                    <div class="mt-3 pt-3 border-t border-[#2a2a4a]">
                      <p class="text-xs text-gray-500">Used by: <span class="text-gray-400">Scrape Job Listing</span></p>
                    </div>
                  </div>
                  
                  <!-- OpenAI - Not Connected -->
                  <div class="p-4 bg-[#1a1a2e] rounded-lg border border-amber-500/30">
                    <div class="flex items-center gap-3">
                      <div class="w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center">
                        <span class="text-xl">ü§ñ</span>
                      </div>
                      <div class="flex-1">
                        <div class="flex items-center gap-2">
                          <span class="text-sm font-medium text-white">OpenAI</span>
                          <span class="px-1.5 py-0.5 text-xs bg-amber-500/20 text-amber-400 rounded">Not Connected</span>
                        </div>
                        <p class="text-xs text-gray-500">Required for AI features</p>
                      </div>
                      <button class="px-3 py-1.5 text-xs bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">Connect</button>
                    </div>
                    <div class="mt-3 pt-3 border-t border-[#2a2a4a]">
                      <p class="text-xs text-gray-500">Used by: <span class="text-gray-400">Generate Tailored Resume</span></p>
                    </div>
                  </div>
                </div>
                
                <!-- Warning Banner -->
                <div class="mt-4 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg">
                  <div class="flex items-start gap-2">
                    <svg class="w-4 h-4 text-amber-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                    <div>
                      <p class="text-xs text-amber-300 font-medium">1 connection required</p>
                      <p class="text-xs text-amber-200/70">Connect OpenAI to run this workflow</p>
                    </div>
                  </div>
                </div>
                
                <!-- Test All Connections -->
                <button class="mt-4 w-full px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg flex items-center justify-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  Test All Connections
                </button>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Shows all integrations required by tools in workflow</li>
            <li>‚Ä¢ Visual status: Connected (green), Not Connected (amber)</li>
            <li>‚Ä¢ Shows which step uses each connection</li>
            <li>‚Ä¢ Warning banner when connections are missing</li>
            <li>‚Ä¢ "Test All Connections" validates OAuth tokens</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 12: TEST TAB -->
    <!-- ========================================== -->
    <section id="state-test-tab" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 12 of 20</span>
            <span class="text-xs text-gray-500">Panel States</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Test Tab</h2>
          <p class="text-gray-400 mt-2">Manage test cases and input data for workflow testing.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/></svg>
                Run Test
              </button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <p class="text-gray-500">[Workflow Canvas Area]</p>
            </main>
            
            <!-- Right: Test Tab Active -->
            <aside class="w-96 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Connect</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5">Test</button>
              </div>
              
              <div class="p-4 overflow-y-auto" style="max-height: 540px;">
                <!-- Saved Test Cases -->
                <div class="mb-6">
                  <div class="flex items-center justify-between mb-3">
                    <h4 class="text-sm font-medium text-white">Saved Test Cases</h4>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">+ New</button>
                  </div>
                  
                  <div class="space-y-2">
                    <!-- Test Case 1 - Passed -->
                    <button class="w-full p-3 bg-[#1a1a2e] rounded-lg border border-transparent hover:border-indigo-500/50 text-left">
                      <div class="flex items-center justify-between mb-1">
                        <span class="text-sm text-white">Basic job flow</span>
                        <span class="px-1.5 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">Passed</span>
                      </div>
                      <p class="text-xs text-gray-500">Last run: 2 min ago ‚Ä¢ 3.2s</p>
                    </button>
                    
                    <!-- Test Case 2 - Never run -->
                    <button class="w-full p-3 bg-[#1a1a2e] rounded-lg border border-transparent hover:border-indigo-500/50 text-left">
                      <div class="flex items-center justify-between mb-1">
                        <span class="text-sm text-white">Edge case: missing fields</span>
                        <span class="px-1.5 py-0.5 text-xs bg-gray-500/20 text-gray-400 rounded">Pending</span>
                      </div>
                      <p class="text-xs text-gray-500">Never run</p>
                    </button>
                    
                    <!-- Test Case 3 - Failed -->
                    <button class="w-full p-3 bg-[#1a1a2e] rounded-lg border border-red-500/30 text-left">
                      <div class="flex items-center justify-between mb-1">
                        <span class="text-sm text-white">Long resume content</span>
                        <span class="px-1.5 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">Failed</span>
                      </div>
                      <p class="text-xs text-gray-500">Last run: 1 hour ago ‚Ä¢ Step 3 failed</p>
                    </button>
                  </div>
                </div>
                
                <!-- Quick Test Input -->
                <div class="border-t border-[#1a1a2e] pt-4">
                  <h4 class="text-sm font-medium text-white mb-3">Quick Test</h4>
                  <p class="text-xs text-gray-500 mb-3">Enter input values to run a one-off test.</p>
                  
                  <div class="space-y-3">
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">jobUrl <span class="text-red-400">*</span></label>
                      <input type="text" placeholder="https://example.com/job/123" class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600" />
                    </div>
                    
                    <div>
                      <label class="text-xs text-gray-400 block mb-1">baseResume <span class="text-red-400">*</span></label>
                      <textarea placeholder="Paste resume content here..." class="w-full bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 h-24 resize-none"></textarea>
                    </div>
                  </div>
                  
                  <div class="flex gap-2 mt-4">
                    <button class="flex-1 px-4 py-2 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center justify-center gap-2">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/></svg>
                      Run
                    </button>
                    <button class="px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg">
                      Save as Test Case
                    </button>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Saved test cases for regression testing</li>
            <li>‚Ä¢ Visual status: Passed (green), Failed (red), Pending (gray)</li>
            <li>‚Ä¢ Quick test form for one-off runs</li>
            <li>‚Ä¢ Option to save quick tests as named test cases</li>
            <li>‚Ä¢ Shows last run time and duration</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 13: DATA MAPPING MODAL -->
    <!-- ========================================== -->
    <section id="state-mapping-modal" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 13 of 20</span>
            <span class="text-xs text-gray-500">Modals</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Data Mapping Modal</h2>
          <p class="text-gray-400 mt-2">Visual editor for mapping outputs from one step to inputs of the next step.</p>
        </div>
        
        <div class="mockup-container relative">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
          </header>
          
          <div class="flex h-[600px] relative">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e]"></aside>
            <main class="flex-1 bg-[#0a0a14] opacity-50"></main>
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e] opacity-50"></aside>
            
            <!-- Modal Overlay -->
            <div class="absolute inset-0 bg-black/60 flex items-center justify-center">
              <div class="w-[800px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-2xl">
                <!-- Modal Header -->
                <div class="p-4 border-b border-[#1a1a2e] flex items-center justify-between">
                  <div>
                    <h3 class="text-lg font-semibold text-white">Data Mapping</h3>
                    <p class="text-sm text-gray-500">Scrape Job ‚Üí Generate Resume</p>
                  </div>
                  <button class="w-8 h-8 rounded-lg hover:bg-[#1a1a2e] flex items-center justify-center text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
                
                <!-- Modal Content -->
                <div class="p-6">
                  <p class="text-sm text-gray-400 mb-6">Connect outputs from Step 1 to inputs for Step 2. Drag lines between compatible fields or use the dropdowns.</p>
                  
                  <div class="flex gap-8">
                    <!-- Source (Output from previous step) -->
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-4">
                        <span class="text-lg">üî•</span>
                        <div>
                          <h4 class="text-sm font-medium text-white">Scrape Job (Output)</h4>
                          <p class="text-xs text-gray-500">Step 1 ‚Üí data</p>
                        </div>
                      </div>
                      
                      <div class="space-y-2 bg-[#0a0a14] rounded-lg p-3">
                        <div class="flex items-center justify-between p-2 bg-[#1a1a2e] rounded hover:bg-[#252538] cursor-pointer border-2 border-transparent hover:border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-emerald-500 rounded-full"></span>
                            <code class="text-sm text-emerald-400">title</code>
                          </div>
                          <span class="text-xs text-gray-500">string</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-[#1a1a2e] rounded hover:bg-[#252538] cursor-pointer border-2 border-transparent hover:border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-emerald-500 rounded-full"></span>
                            <code class="text-sm text-emerald-400">company</code>
                          </div>
                          <span class="text-xs text-gray-500">string</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-indigo-500/20 rounded cursor-pointer border-2 border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-indigo-500 rounded-full"></span>
                            <code class="text-sm text-indigo-400">requirements</code>
                          </div>
                          <span class="text-xs text-gray-500">string[]</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-[#1a1a2e] rounded hover:bg-[#252538] cursor-pointer border-2 border-transparent hover:border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-emerald-500 rounded-full"></span>
                            <code class="text-sm text-emerald-400">salary</code>
                          </div>
                          <span class="text-xs text-gray-500">string</span>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Connection Lines Visual -->
                    <div class="w-24 flex items-center justify-center">
                      <svg class="w-full h-48" viewBox="0 0 100 200">
                        <path d="M 10 30 C 50 30 50 50 90 50" stroke="#6366f1" stroke-width="2" fill="none"/>
                        <path d="M 10 70 C 50 70 50 90 90 90" stroke="#6366f1" stroke-width="2" fill="none"/>
                        <path d="M 10 110 C 50 110 50 130 90 130" stroke="#6366f1" stroke-width="2" fill="none"/>
                        <!-- Animated dot on line -->
                        <circle r="4" fill="#6366f1">
                          <animateMotion dur="2s" repeatCount="indefinite" path="M 10 30 C 50 30 50 50 90 50"/>
                        </circle>
                      </svg>
                    </div>
                    
                    <!-- Target (Input for next step) -->
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-4">
                        <span class="text-lg">ü§ñ</span>
                        <div>
                          <h4 class="text-sm font-medium text-white">Generate Resume (Input)</h4>
                          <p class="text-xs text-gray-500">Step 2 inputs</p>
                        </div>
                      </div>
                      
                      <div class="space-y-2 bg-[#0a0a14] rounded-lg p-3">
                        <div class="flex items-center justify-between p-2 bg-indigo-500/20 rounded border-2 border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-indigo-500 rounded-full"></span>
                            <code class="text-sm text-indigo-400">jobTitle</code>
                            <span class="text-xs text-red-400">*</span>
                          </div>
                          <span class="text-xs text-emerald-400">‚Üê title</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-indigo-500/20 rounded border-2 border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-indigo-500 rounded-full"></span>
                            <code class="text-sm text-indigo-400">companyName</code>
                            <span class="text-xs text-red-400">*</span>
                          </div>
                          <span class="text-xs text-emerald-400">‚Üê company</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-indigo-500/20 rounded border-2 border-indigo-500">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-indigo-500 rounded-full"></span>
                            <code class="text-sm text-indigo-400">targetSkills</code>
                            <span class="text-xs text-red-400">*</span>
                          </div>
                          <span class="text-xs text-emerald-400">‚Üê requirements</span>
                        </div>
                        <div class="flex items-center justify-between p-2 bg-amber-500/20 rounded border-2 border-amber-500/50">
                          <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-amber-500 rounded-full"></span>
                            <code class="text-sm text-amber-400">baseResume</code>
                            <span class="text-xs text-red-400">*</span>
                          </div>
                          <span class="text-xs text-amber-400">Not mapped</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Code Preview Toggle -->
                  <div class="mt-6 p-3 bg-[#0a0a14] rounded-lg">
                    <div class="flex items-center justify-between mb-2">
                      <span class="text-xs text-gray-500">Generated Mapping Code</span>
                      <button class="text-xs text-indigo-400 hover:text-indigo-300">Edit Code</button>
                    </div>
                    <pre class="text-xs text-gray-400 font-mono overflow-x-auto"><code>.map(async ({ inputData }) => ({
  jobTitle: inputData.data.title,
  companyName: inputData.data.company,
  targetSkills: inputData.data.requirements,
  baseResume: getFromTrigger('baseResume')
}))</code></pre>
                  </div>
                </div>
                
                <!-- Modal Footer -->
                <div class="p-4 border-t border-[#1a1a2e] flex justify-between">
                  <button class="px-4 py-2 text-sm text-gray-400 hover:text-white">Cancel</button>
                  <div class="flex gap-2">
                    <button class="px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg">Auto-Map</button>
                    <button class="px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">Save Mapping</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Two-column layout: Source outputs on left, Target inputs on right</li>
            <li>‚Ä¢ Visual connection lines between mapped fields</li>
            <li>‚Ä¢ Color coding: Mapped (indigo), Unmapped (amber), Available (emerald)</li>
            <li>‚Ä¢ Shows generated <code>.map()</code> code for transparency</li>
            <li>‚Ä¢ "Auto-Map" attempts to match fields by name/type</li>
            <li>‚Ä¢ "Edit Code" for advanced users who prefer TypeScript</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 14: ADD STEP WIZARD -->
    <!-- ========================================== -->
    <section id="state-add-step-wizard" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 14 of 20</span>
            <span class="text-xs text-gray-500">Modals</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Add Step Wizard</h2>
          <p class="text-gray-400 mt-2">Progressive disclosure wizard for adding new steps to the workflow.</p>
        </div>
        
        <div class="mockup-container relative">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
          </header>
          
          <div class="flex h-[600px] relative">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e]"></aside>
            <main class="flex-1 bg-[#0a0a14] opacity-50"></main>
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e] opacity-50"></aside>
            
            <!-- Modal Overlay -->
            <div class="absolute inset-0 bg-black/60 flex items-center justify-center">
              <div class="w-[600px] bg-[#12121f] rounded-xl border border-[#2a2a4a] shadow-2xl">
                <!-- Modal Header -->
                <div class="p-4 border-b border-[#1a1a2e] flex items-center justify-between">
                  <div>
                    <h3 class="text-lg font-semibold text-white">Add New Step</h3>
                    <p class="text-sm text-gray-500">Choose what type of step to add</p>
                  </div>
                  <button class="w-8 h-8 rounded-lg hover:bg-[#1a1a2e] flex items-center justify-center text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                  </button>
                </div>
                
                <!-- Modal Content - Step Type Selection -->
                <div class="p-6">
                  <div class="grid grid-cols-2 gap-4">
                    <!-- Composio Tool -->
                    <button class="p-4 bg-[#1a1a2e] hover:bg-[#252538] rounded-xl border-2 border-transparent hover:border-indigo-500 text-left transition-all group">
                      <div class="flex items-center gap-3 mb-3">
                        <span class="text-3xl">üîß</span>
                        <div>
                          <h4 class="text-sm font-semibold text-white group-hover:text-indigo-300">Composio Tool</h4>
                          <p class="text-xs text-gray-500">Pre-built integration</p>
                        </div>
                      </div>
                      <p class="text-xs text-gray-400">Use a pre-built tool like Gmail, Slack, GitHub, Firecrawl, and more.</p>
                    </button>
                    
                    <!-- Custom Code -->
                    <button class="p-4 bg-[#1a1a2e] hover:bg-[#252538] rounded-xl border-2 border-transparent hover:border-indigo-500 text-left transition-all group">
                      <div class="flex items-center gap-3 mb-3">
                        <span class="text-3xl">üíª</span>
                        <div>
                          <h4 class="text-sm font-semibold text-white group-hover:text-indigo-300">Custom Code</h4>
                          <p class="text-xs text-gray-500">Write TypeScript</p>
                        </div>
                      </div>
                      <p class="text-xs text-gray-400">Transform data, call custom APIs, or implement business logic.</p>
                    </button>
                    
                    <!-- Branch -->
                    <button class="p-4 bg-[#1a1a2e] hover:bg-[#252538] rounded-xl border-2 border-transparent hover:border-amber-500 text-left transition-all group">
                      <div class="flex items-center gap-3 mb-3">
                        <span class="text-3xl">üîÄ</span>
                        <div>
                          <h4 class="text-sm font-semibold text-white group-hover:text-amber-300">Branch (If/Else)</h4>
                          <p class="text-xs text-gray-500">Conditional logic</p>
                        </div>
                      </div>
                      <p class="text-xs text-gray-400">Take different paths based on data conditions.</p>
                    </button>
                    
                    <!-- Parallel -->
                    <button class="p-4 bg-[#1a1a2e] hover:bg-[#252538] rounded-xl border-2 border-transparent hover:border-purple-500 text-left transition-all group">
                      <div class="flex items-center gap-3 mb-3">
                        <span class="text-3xl">‚è∏Ô∏è</span>
                        <div>
                          <h4 class="text-sm font-semibold text-white group-hover:text-purple-300">Parallel Steps</h4>
                          <p class="text-xs text-gray-500">Concurrent execution</p>
                        </div>
                      </div>
                      <p class="text-xs text-gray-400">Run multiple steps at the same time.</p>
                    </button>
                    
                    <!-- Loop -->
                    <button class="p-4 bg-[#1a1a2e] hover:bg-[#252538] rounded-xl border-2 border-transparent hover:border-emerald-500 text-left transition-all group">
                      <div class="flex items-center gap-3 mb-3">
                        <span class="text-3xl">üîÅ</span>
                        <div>
                          <h4 class="text-sm font-semibold text-white group-hover:text-emerald-300">Loop</h4>
                          <p class="text-xs text-gray-500">Iteration</p>
                        </div>
                      </div>
                      <p class="text-xs text-gray-400">Repeat steps for each item in an array or until a condition is met.</p>
                    </button>
                    
                    <!-- Import -->
                    <button class="p-4 bg-[#1a1a2e] hover:bg-[#252538] rounded-xl border-2 border-transparent hover:border-cyan-500 text-left transition-all group">
                      <div class="flex items-center gap-3 mb-3">
                        <span class="text-3xl">üì¶</span>
                        <div>
                          <h4 class="text-sm font-semibold text-white group-hover:text-cyan-300">Import Step</h4>
                          <p class="text-xs text-gray-500">Reuse existing</p>
                        </div>
                      </div>
                      <p class="text-xs text-gray-400">Reuse a step from another workflow or the marketplace.</p>
                    </button>
                  </div>
                </div>
                
                <!-- Modal Footer -->
                <div class="p-4 border-t border-[#1a1a2e] flex justify-between">
                  <button class="px-4 py-2 text-sm text-gray-400 hover:text-white">Cancel</button>
                  <div class="text-xs text-gray-500">Step 1 of 2</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Step 1: Choose step type (shown above)</li>
            <li>‚Ä¢ Step 2: Configure the specific step (tool selection, code editor, etc.)</li>
            <li>‚Ä¢ Each step type has distinct color coding</li>
            <li>‚Ä¢ Progressive disclosure - don't overwhelm with all options at once</li>
            <li>‚Ä¢ Import option enables marketplace/reusability pattern</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 15: TEST RUNNING -->
    <!-- ========================================== -->
    <section id="state-test-running" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 15 of 20</span>
            <span class="text-xs text-gray-500">Test Execution</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Test Running</h2>
          <p class="text-gray-400 mt-2">Live execution view showing progress through each step.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <span class="text-white font-medium">Job Application Workflow</span>
              <span class="px-2 py-0.5 text-xs bg-amber-500/20 text-amber-400 rounded animate-pulse">Running</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-sm text-gray-400">Elapsed: <span class="text-white">2.4s</span></span>
              <button class="px-4 py-2 text-sm bg-red-600 hover:bg-red-700 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                Stop
              </button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- Collapsed sidebars during test -->
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] opacity-50"></aside>
            
            <!-- Center: Live Execution View -->
            <main class="flex-1 bg-[#0a0a14] p-6 overflow-y-auto">
              <div class="max-w-3xl mx-auto">
                <!-- Progress Bar -->
                <div class="mb-8">
                  <div class="flex justify-between text-sm text-gray-400 mb-2">
                    <span>Progress</span>
                    <span>Step 2 of 3</span>
                  </div>
                  <div class="h-2 bg-[#1a1a2e] rounded-full overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full" style="width: 66%"></div>
                  </div>
                </div>
                
                <!-- Step 1: Completed -->
                <div class="mb-4">
                  <div class="flex items-center gap-4 p-4 bg-[#12121f] rounded-lg border border-green-500/30">
                    <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center">
                      <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <span class="text-lg">üî•</span>
                        <span class="text-sm font-medium text-white">Scrape Job Listing</span>
                        <span class="text-xs text-green-400">‚úì Completed</span>
                      </div>
                      <p class="text-xs text-gray-500 mt-1">Executed in 1.2s</p>
                    </div>
                    <button class="px-3 py-1.5 text-xs bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded">View Output</button>
                  </div>
                </div>
                
                <!-- Step 2: Running -->
                <div class="mb-4">
                  <div class="flex items-center gap-4 p-4 bg-[#12121f] rounded-lg border-2 border-indigo-500 ring-4 ring-indigo-500/20">
                    <div class="w-10 h-10 rounded-full bg-indigo-500/20 flex items-center justify-center">
                      <svg class="w-5 h-5 text-indigo-400 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <span class="text-lg">ü§ñ</span>
                        <span class="text-sm font-medium text-white">Generate Tailored Resume</span>
                        <span class="text-xs text-indigo-400 animate-pulse">Running...</span>
                      </div>
                      <p class="text-xs text-gray-500 mt-1">Calling OpenAI API...</p>
                    </div>
                    <div class="text-sm text-indigo-400">1.2s</div>
                  </div>
                </div>
                
                <!-- Step 3: Pending -->
                <div class="mb-4">
                  <div class="flex items-center gap-4 p-4 bg-[#12121f] rounded-lg border border-[#2a2a4a] opacity-60">
                    <div class="w-10 h-10 rounded-full bg-[#1a1a2e] flex items-center justify-center">
                      <span class="text-gray-500">3</span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2">
                        <span class="text-lg">üìß</span>
                        <span class="text-sm font-medium text-gray-400">Send Application Email</span>
                        <span class="text-xs text-gray-500">Pending</span>
                      </div>
                      <p class="text-xs text-gray-600 mt-1">Waiting for previous step</p>
                    </div>
                  </div>
                </div>
                
                <!-- Live Output Stream -->
                <div class="mt-8 p-4 bg-[#0a0a14] rounded-lg border border-[#1a1a2e]">
                  <div class="flex items-center justify-between mb-3">
                    <h4 class="text-sm font-medium text-white">Live Output</h4>
                    <span class="text-xs text-gray-500">Step 2</span>
                  </div>
                  <div class="font-mono text-xs text-gray-400 space-y-1 max-h-32 overflow-y-auto">
                    <p><span class="text-gray-600">[2.1s]</span> Preparing prompt with job requirements...</p>
                    <p><span class="text-gray-600">[2.2s]</span> Sending request to GPT-4...</p>
                    <p class="text-indigo-400 animate-pulse"><span class="text-gray-600">[2.4s]</span> Generating response...</p>
                  </div>
                </div>
              </div>
            </main>
            
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e] opacity-50"></aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Clear visual distinction: Completed (green), Running (indigo pulse), Pending (gray)</li>
            <li>‚Ä¢ Progress bar shows overall workflow progress</li>
            <li>‚Ä¢ Elapsed time tracking for performance visibility</li>
            <li>‚Ä¢ Live output stream for debugging</li>
            <li>‚Ä¢ Stop button for aborting long-running tests</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 16: TEST SUCCESS -->
    <!-- ========================================== -->
    <section id="state-test-success" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 16 of 20</span>
            <span class="text-xs text-gray-500">Test Execution</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Test Success</h2>
          <p class="text-gray-400 mt-2">Workflow completed successfully with full output inspection.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <span class="text-white font-medium">Job Application Workflow</span>
              <span class="px-2 py-0.5 text-xs bg-green-500/20 text-green-400 rounded">‚úì Passed</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-sm text-gray-400">Total: <span class="text-white">3.8s</span></span>
              <button class="px-4 py-2 text-sm bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                Run Again
              </button>
              <button class="px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">
                Publish Workflow
              </button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e]"></aside>
            
            <main class="flex-1 bg-[#0a0a14] p-6 overflow-y-auto">
              <div class="max-w-3xl mx-auto">
                <!-- Success Banner -->
                <div class="mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg flex items-center gap-4">
                  <div class="w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center">
                    <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-green-400">Test Passed!</h3>
                    <p class="text-sm text-gray-400">All 3 steps completed successfully in 3.8 seconds</p>
                  </div>
                </div>
                
                <!-- Completed Steps -->
                <div class="space-y-3 mb-6">
                  <div class="flex items-center gap-4 p-3 bg-[#12121f] rounded-lg border border-green-500/20">
                    <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                      <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1 flex items-center gap-2">
                      <span>üî•</span>
                      <span class="text-sm text-white">Scrape Job Listing</span>
                      <span class="text-xs text-gray-500">1.2s</span>
                    </div>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">View Output</button>
                  </div>
                  
                  <div class="flex items-center gap-4 p-3 bg-[#12121f] rounded-lg border border-green-500/20">
                    <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                      <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1 flex items-center gap-2">
                      <span>ü§ñ</span>
                      <span class="text-sm text-white">Generate Tailored Resume</span>
                      <span class="text-xs text-gray-500">2.1s</span>
                    </div>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">View Output</button>
                  </div>
                  
                  <div class="flex items-center gap-4 p-3 bg-[#12121f] rounded-lg border border-green-500/20">
                    <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                      <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1 flex items-center gap-2">
                      <span>üìß</span>
                      <span class="text-sm text-white">Send Application Email</span>
                      <span class="text-xs text-gray-500">0.5s</span>
                    </div>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300">View Output</button>
                  </div>
                </div>
                
                <!-- Final Output -->
                <div class="p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
                  <div class="flex items-center justify-between mb-3">
                    <h4 class="text-sm font-medium text-white">Final Output</h4>
                    <button class="text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1">
                      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                      Copy JSON
                    </button>
                  </div>
                  <pre class="text-xs text-gray-400 font-mono bg-[#0a0a14] p-3 rounded overflow-x-auto"><code>{
  "success": true,
  "emailSent": {
    "messageId": "17abc123def456",
    "to": "hr@company.com",
    "subject": "Application: Senior Developer",
    "timestamp": "2024-01-15T10:30:00Z"
  },
  "resume": {
    "format": "pdf",
    "url": "https://storage.example.com/resumes/abc123.pdf"
  }
}</code></pre>
                </div>
              </div>
            </main>
            
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]"></aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Celebratory success banner</li>
            <li>‚Ä¢ Per-step timing for performance analysis</li>
            <li>‚Ä¢ Expandable output for each step</li>
            <li>‚Ä¢ Final output with copy button</li>
            <li>‚Ä¢ Clear next actions: Run Again, Publish</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 17: TEST ERROR -->
    <!-- ========================================== -->
    <section id="state-test-error" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 17 of 20</span>
            <span class="text-xs text-gray-500">Test Execution</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Test Error</h2>
          <p class="text-gray-400 mt-2">Step failed with error details and suggested fixes.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <span class="text-white font-medium">Job Application Workflow</span>
              <span class="px-2 py-0.5 text-xs bg-red-500/20 text-red-400 rounded">‚úó Failed</span>
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg">Edit Step</button>
              <button class="px-4 py-2 text-sm bg-amber-600 hover:bg-amber-700 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>
                Retry
              </button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e]"></aside>
            
            <main class="flex-1 bg-[#0a0a14] p-6 overflow-y-auto">
              <div class="max-w-3xl mx-auto">
                <!-- Error Banner -->
                <div class="mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg">
                  <div class="flex items-start gap-4">
                    <div class="w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center flex-shrink-0">
                      <svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    </div>
                    <div>
                      <h3 class="text-lg font-semibold text-red-400">Step 3 Failed</h3>
                      <p class="text-sm text-gray-300 mt-1">Send Application Email</p>
                      <p class="text-sm text-red-300 mt-2 font-mono">Error: GMAIL_AUTH_EXPIRED - OAuth token has expired</p>
                    </div>
                  </div>
                </div>
                
                <!-- Steps with Error -->
                <div class="space-y-3 mb-6">
                  <div class="flex items-center gap-4 p-3 bg-[#12121f] rounded-lg border border-green-500/20">
                    <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                      <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1 flex items-center gap-2">
                      <span>üî•</span>
                      <span class="text-sm text-white">Scrape Job Listing</span>
                      <span class="text-xs text-green-400">‚úì</span>
                    </div>
                  </div>
                  
                  <div class="flex items-center gap-4 p-3 bg-[#12121f] rounded-lg border border-green-500/20">
                    <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center">
                      <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
                    </div>
                    <div class="flex-1 flex items-center gap-2">
                      <span>ü§ñ</span>
                      <span class="text-sm text-white">Generate Tailored Resume</span>
                      <span class="text-xs text-green-400">‚úì</span>
                    </div>
                  </div>
                  
                  <div class="flex items-center gap-4 p-3 bg-[#12121f] rounded-lg border-2 border-red-500">
                    <div class="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center">
                      <svg class="w-4 h-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                    </div>
                    <div class="flex-1 flex items-center gap-2">
                      <span>üìß</span>
                      <span class="text-sm text-white">Send Application Email</span>
                      <span class="text-xs text-red-400">‚úó Failed</span>
                    </div>
                  </div>
                </div>
                
                <!-- Error Details -->
                <div class="p-4 bg-[#12121f] rounded-lg border border-red-500/30 mb-4">
                  <h4 class="text-sm font-medium text-white mb-3">Error Details</h4>
                  <pre class="text-xs text-red-300 font-mono bg-[#0a0a14] p-3 rounded overflow-x-auto"><code>GmailAuthError: OAuth token has expired
  at GmailService.sendEmail (gmail-service.ts:45)
  at Step3.execute (step-3.ts:12)
  at WorkflowRunner.run (runner.ts:89)

Token expired at: 2024-01-14T08:00:00Z
Current time: 2024-01-15T10:30:00Z</code></pre>
                </div>
                
                <!-- Suggested Fix -->
                <div class="p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg">
                  <div class="flex items-start gap-3">
                    <svg class="w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
                    <div>
                      <h4 class="text-sm font-medium text-amber-300">Suggested Fix</h4>
                      <p class="text-sm text-gray-300 mt-1">Your Gmail OAuth token has expired. Go to the <strong>Connect</strong> tab and click "Reconnect" next to Gmail to refresh your authentication.</p>
                      <button class="mt-3 px-4 py-2 text-sm bg-amber-600 hover:bg-amber-700 text-white rounded-lg">
                        Go to Connections ‚Üí
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </main>
            
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]"></aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Clear indication of which step failed</li>
            <li>‚Ä¢ Full error message with stack trace for debugging</li>
            <li>‚Ä¢ AI-powered suggested fix when possible</li>
            <li>‚Ä¢ Direct link to fix the issue (e.g., Go to Connections)</li>
            <li>‚Ä¢ Retry button to re-run after fixing</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 18: SPEC VIEW -->
    <!-- ========================================== -->
    <section id="state-spec-view" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 18 of 20</span>
            <span class="text-xs text-gray-500">Other Views</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Spec View</h2>
          <p class="text-gray-400 mt-2">Human-readable specification view - the workflow as an SOP.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <span class="text-white font-medium">Job Application Workflow</span>
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Flow</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-indigo-600 text-white">Spec</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Code</button>
              </div>
              <button class="px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                Export PDF
              </button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <aside class="w-16 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col items-center py-4">
              <button class="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
              </button>
            </aside>
            
            <!-- Center: Spec Document -->
            <main class="flex-1 bg-white p-8 overflow-y-auto">
              <div class="max-w-2xl mx-auto">
                <!-- Document Header -->
                <div class="border-b-2 border-gray-200 pb-6 mb-8">
                  <div class="flex items-center gap-2 text-gray-500 text-sm mb-2">
                    <span>üìã</span> Standard Operating Procedure
                  </div>
                  <h1 class="text-3xl font-bold text-gray-900 mb-2">Job Application Workflow</h1>
                  <p class="text-gray-600">Automatically scrape job listings, generate tailored resumes, and send application emails.</p>
                  <div class="flex items-center gap-4 mt-4 text-sm text-gray-500">
                    <span>Version 1.2</span>
                    <span>‚Ä¢</span>
                    <span>Last updated: Jan 15, 2024</span>
                    <span>‚Ä¢</span>
                    <span>3 steps</span>
                  </div>
                </div>
                
                <!-- Required Inputs -->
                <div class="mb-8">
                  <h2 class="text-xl font-semibold text-gray-900 mb-4">üì• Required Inputs</h2>
                  <table class="w-full text-sm">
                    <thead>
                      <tr class="border-b border-gray-200">
                        <th class="text-left py-2 text-gray-600 font-medium">Input</th>
                        <th class="text-left py-2 text-gray-600 font-medium">Type</th>
                        <th class="text-left py-2 text-gray-600 font-medium">Description</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="border-b border-gray-100">
                        <td class="py-2 font-mono text-indigo-600">jobUrl</td>
                        <td class="py-2 text-gray-500">string</td>
                        <td class="py-2 text-gray-700">URL of the job listing to scrape</td>
                      </tr>
                      <tr class="border-b border-gray-100">
                        <td class="py-2 font-mono text-indigo-600">baseResume</td>
                        <td class="py-2 text-gray-500">string</td>
                        <td class="py-2 text-gray-700">User's base resume content</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                
                <!-- Procedure Steps -->
                <div class="mb-8">
                  <h2 class="text-xl font-semibold text-gray-900 mb-4">üìã Procedure</h2>
                  
                  <!-- Step 1 -->
                  <div class="mb-6 pl-4 border-l-4 border-blue-500">
                    <div class="flex items-center gap-2 mb-2">
                      <span class="w-6 h-6 rounded-full bg-blue-500 text-white text-sm flex items-center justify-center">1</span>
                      <h3 class="text-lg font-medium text-gray-900">Scrape Job Listing</h3>
                    </div>
                    <p class="text-gray-700 mb-3">Extract job details from the provided URL including title, company, requirements, and contact information.</p>
                    <div class="bg-gray-50 p-3 rounded-lg text-sm">
                      <div class="flex items-center gap-2 text-gray-600 mb-1">
                        <span class="font-medium">Tool:</span> Firecrawl ‚Ä¢ Scrape Page
                      </div>
                      <div class="flex items-center gap-2 text-gray-600">
                        <span class="font-medium">Output:</span> <code class="text-emerald-600">jobData</code> (title, company, requirements, salary)
                      </div>
                    </div>
                  </div>
                  
                  <!-- Step 2 -->
                  <div class="mb-6 pl-4 border-l-4 border-purple-500">
                    <div class="flex items-center gap-2 mb-2">
                      <span class="w-6 h-6 rounded-full bg-purple-500 text-white text-sm flex items-center justify-center">2</span>
                      <h3 class="text-lg font-medium text-gray-900">Generate Tailored Resume</h3>
                    </div>
                    <p class="text-gray-700 mb-3">Use AI to customize the resume based on job requirements, emphasizing relevant skills and experience.</p>
                    <div class="bg-gray-50 p-3 rounded-lg text-sm">
                      <div class="flex items-center gap-2 text-gray-600 mb-1">
                        <span class="font-medium">Tool:</span> OpenAI ‚Ä¢ Chat Completion
                      </div>
                      <div class="flex items-center gap-2 text-gray-600">
                        <span class="font-medium">Output:</span> <code class="text-emerald-600">tailoredResume</code> (formatted resume text)
                      </div>
                    </div>
                  </div>
                  
                  <!-- Step 3 -->
                  <div class="mb-6 pl-4 border-l-4 border-red-500">
                    <div class="flex items-center gap-2 mb-2">
                      <span class="w-6 h-6 rounded-full bg-red-500 text-white text-sm flex items-center justify-center">3</span>
                      <h3 class="text-lg font-medium text-gray-900">Send Application Email</h3>
                    </div>
                    <p class="text-gray-700 mb-3">Send the tailored resume and cover letter to the hiring contact via email.</p>
                    <div class="bg-gray-50 p-3 rounded-lg text-sm">
                      <div class="flex items-center gap-2 text-gray-600 mb-1">
                        <span class="font-medium">Tool:</span> Gmail ‚Ä¢ Send Email
                      </div>
                      <div class="flex items-center gap-2 text-gray-600">
                        <span class="font-medium">Output:</span> <code class="text-emerald-600">emailStatus</code> (messageId, timestamp)
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Connections Required -->
                <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                  <h3 class="text-sm font-semibold text-amber-800 mb-2">üîå Required Connections</h3>
                  <ul class="text-sm text-amber-700 space-y-1">
                    <li>‚Ä¢ Firecrawl (API Key)</li>
                    <li>‚Ä¢ OpenAI (API Key)</li>
                    <li>‚Ä¢ Gmail (OAuth)</li>
                  </ul>
                </div>
              </div>
            </main>
            
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]"></aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Clean, printable document format</li>
            <li>‚Ä¢ SOP-style layout that non-technical users can understand</li>
            <li>‚Ä¢ Export to PDF for sharing/documentation</li>
            <li>‚Ä¢ Shows inputs, steps, outputs, and requirements clearly</li>
            <li>‚Ä¢ Key UX principle: "Workflows as SOPs"</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 19: CODE VIEW -->
    <!-- ========================================== -->
    <section id="state-code-view" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 19 of 20</span>
            <span class="text-xs text-gray-500">Other Views</span>
          </div>
          <h2 class="text-2xl font-bold text-white">Code View</h2>
          <p class="text-gray-400 mt-2">Generated TypeScript/Mastra code for the workflow.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <span class="text-white font-medium">Job Application Workflow</span>
            </div>
            <div class="flex items-center gap-3">
              <div class="flex bg-[#1a1a2e] rounded-lg p-1">
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Flow</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md text-gray-400">Spec</button>
                <button class="px-3 py-1.5 text-xs font-medium rounded-md bg-indigo-600 text-white">Code</button>
              </div>
              <button class="px-4 py-2 text-sm bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
                Copy
              </button>
              <button class="px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                Download .ts
              </button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- File Tree Sidebar -->
            <aside class="w-56 bg-[#0f0f1a] border-r border-[#1a1a2e]">
              <div class="p-3 border-b border-[#1a1a2e]">
                <span class="text-xs text-gray-500 uppercase tracking-wider">Generated Files</span>
              </div>
              <div class="p-2">
                <button class="w-full flex items-center gap-2 px-2 py-1.5 text-sm text-white bg-indigo-500/20 rounded">
                  <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  workflow.ts
                </button>
                <button class="w-full flex items-center gap-2 px-2 py-1.5 text-sm text-gray-400 hover:text-white hover:bg-[#1a1a2e] rounded">
                  <svg class="w-4 h-4 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  workflow.json
                </button>
                <div class="mt-2 pl-2">
                  <div class="text-xs text-gray-600 mb-1">steps/</div>
                  <button class="w-full flex items-center gap-2 px-2 py-1 text-xs text-gray-500 hover:text-white hover:bg-[#1a1a2e] rounded">
                    <svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/></svg>
                    scrapeJob.ts
                  </button>
                  <button class="w-full flex items-center gap-2 px-2 py-1 text-xs text-gray-500 hover:text-white hover:bg-[#1a1a2e] rounded">
                    <svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2 2V4z" clip-rule="evenodd"/></svg>
                    generateResume.ts
                  </button>
                  <button class="w-full flex items-center gap-2 px-2 py-1 text-xs text-gray-500 hover:text-white hover:bg-[#1a1a2e] rounded">
                    <svg class="w-3 h-3 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2 2V4z" clip-rule="evenodd"/></svg>
                    sendEmail.ts
                  </button>
                </div>
              </div>
            </aside>
            
            <!-- Code Editor -->
            <main class="flex-1 bg-[#0a0a14] overflow-auto">
              <div class="p-4">
                <pre class="text-sm font-mono leading-relaxed"><code><span class="text-gray-500">// workflow.ts - Generated by Agipo Workflow Editor</span>
<span class="text-gray-500">// Do not edit manually - changes will be overwritten</span>

<span class="text-purple-400">import</span> { <span class="text-yellow-300">createWorkflow</span>, <span class="text-yellow-300">createStep</span> } <span class="text-purple-400">from</span> <span class="text-emerald-400">'@mastra/core'</span>;
<span class="text-purple-400">import</span> { <span class="text-yellow-300">z</span> } <span class="text-purple-400">from</span> <span class="text-emerald-400">'zod'</span>;
<span class="text-purple-400">import</span> { <span class="text-yellow-300">composioTools</span> } <span class="text-purple-400">from</span> <span class="text-emerald-400">'./composio'</span>;

<span class="text-gray-500">// Input Schema</span>
<span class="text-purple-400">const</span> <span class="text-cyan-300">inputSchema</span> = <span class="text-yellow-300">z</span>.<span class="text-blue-300">object</span>({
  <span class="text-white">jobUrl</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>().<span class="text-blue-300">url</span>(),
  <span class="text-white">baseResume</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>(),
});

<span class="text-gray-500">// Step 1: Scrape Job Listing</span>
<span class="text-purple-400">const</span> <span class="text-cyan-300">scrapeJob</span> = <span class="text-yellow-300">createStep</span>({
  <span class="text-white">id</span>: <span class="text-emerald-400">'scrape-job'</span>,
  <span class="text-white">inputSchema</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">object</span>({
    <span class="text-white">url</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>().<span class="text-blue-300">url</span>(),
  }),
  <span class="text-white">outputSchema</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">object</span>({
    <span class="text-white">title</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>(),
    <span class="text-white">company</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>(),
    <span class="text-white">requirements</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">array</span>(<span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>()),
    <span class="text-white">salary</span>: <span class="text-yellow-300">z</span>.<span class="text-blue-300">string</span>().<span class="text-blue-300">optional</span>(),
  }),
  <span class="text-purple-400">execute</span>: <span class="text-purple-400">async</span> ({ <span class="text-orange-300">inputData</span> }) => {
    <span class="text-purple-400">return await</span> <span class="text-cyan-300">composioTools</span>.<span class="text-blue-300">firecrawl</span>.<span class="text-blue-300">scrapePage</span>({
      <span class="text-white">url</span>: <span class="text-orange-300">inputData</span>.<span class="text-white">url</span>,
    });
  },
});

<span class="text-gray-500">// Step 2: Generate Tailored Resume</span>
<span class="text-purple-400">const</span> <span class="text-cyan-300">generateResume</span> = <span class="text-yellow-300">createStep</span>({
  <span class="text-white">id</span>: <span class="text-emerald-400">'generate-resume'</span>,
  <span class="text-gray-500">// ... configuration</span>
});

<span class="text-gray-500">// Step 3: Send Email</span>
<span class="text-purple-400">const</span> <span class="text-cyan-300">sendEmail</span> = <span class="text-yellow-300">createStep</span>({
  <span class="text-white">id</span>: <span class="text-emerald-400">'send-email'</span>,
  <span class="text-gray-500">// ... configuration</span>
});

<span class="text-gray-500">// Workflow Definition</span>
<span class="text-purple-400">export const</span> <span class="text-cyan-300">jobApplicationWorkflow</span> = <span class="text-yellow-300">createWorkflow</span>({
  <span class="text-white">id</span>: <span class="text-emerald-400">'job-application-workflow'</span>,
  <span class="text-white">inputSchema</span>,
  <span class="text-white">triggerSchema</span>: <span class="text-cyan-300">inputSchema</span>,
})
  .<span class="text-blue-300">then</span>(<span class="text-cyan-300">scrapeJob</span>)
  .<span class="text-blue-300">map</span>(<span class="text-purple-400">async</span> ({ <span class="text-orange-300">inputData</span> }) => ({
    <span class="text-white">jobTitle</span>: <span class="text-orange-300">inputData</span>.<span class="text-white">title</span>,
    <span class="text-white">companyName</span>: <span class="text-orange-300">inputData</span>.<span class="text-white">company</span>,
    <span class="text-white">targetSkills</span>: <span class="text-orange-300">inputData</span>.<span class="text-white">requirements</span>,
    <span class="text-white">baseResume</span>: <span class="text-cyan-300">getFromTrigger</span>(<span class="text-emerald-400">'baseResume'</span>),
  }))
  .<span class="text-blue-300">then</span>(<span class="text-cyan-300">generateResume</span>)
  .<span class="text-blue-300">map</span>(<span class="text-purple-400">async</span> ({ <span class="text-orange-300">inputData</span> }) => ({
    <span class="text-white">to</span>: <span class="text-orange-300">inputData</span>.<span class="text-white">contactEmail</span>,
    <span class="text-white">body</span>: <span class="text-orange-300">inputData</span>.<span class="text-white">tailoredResume</span>,
  }))
  .<span class="text-blue-300">then</span>(<span class="text-cyan-300">sendEmail</span>)
  .<span class="text-blue-300">commit</span>();
</code></pre>
              </div>
            </main>
            
            <aside class="w-64 bg-[#0f0f1a] border-l border-[#1a1a2e] p-4">
              <h4 class="text-sm font-medium text-white mb-3">Code Info</h4>
              <div class="space-y-3 text-xs">
                <div>
                  <span class="text-gray-500">Lines:</span>
                  <span class="text-white ml-2">87</span>
                </div>
                <div>
                  <span class="text-gray-500">Last generated:</span>
                  <span class="text-white ml-2">Just now</span>
                </div>
                <div>
                  <span class="text-gray-500">Framework:</span>
                  <span class="text-white ml-2">Mastra 0.24.x</span>
                </div>
              </div>
              
              <div class="mt-6 pt-4 border-t border-[#1a1a2e]">
                <h4 class="text-sm font-medium text-white mb-3">Dependencies</h4>
                <div class="space-y-2 text-xs">
                  <div class="flex justify-between">
                    <span class="text-gray-400">@mastra/core</span>
                    <span class="text-emerald-400">0.24.x</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-400">zod</span>
                    <span class="text-emerald-400">3.x</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-gray-400">@composio/mastra</span>
                    <span class="text-amber-400">*workaround</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Syntax-highlighted TypeScript code</li>
            <li>‚Ä¢ File tree showing all generated files</li>
            <li>‚Ä¢ Copy and Download buttons for export</li>
            <li>‚Ä¢ Shows framework version and dependencies</li>
            <li>‚Ä¢ Read-only - generated deterministically from workflow.json</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ========================================== -->
    <!-- SECTION 20: AI CONVERSATION -->
    <!-- ========================================== -->
    <section id="state-ai-conversation" class="state-section p-8">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <span class="state-badge">State 20 of 20</span>
            <span class="text-xs text-gray-500">Other Views</span>
          </div>
          <h2 class="text-2xl font-bold text-white">AI Conversation (Expanded)</h2>
          <p class="text-gray-400 mt-2">Full AI assistant panel for natural language workflow building and help.</p>
        </div>
        
        <div class="mockup-container">
          <header class="h-14 bg-[#12121f] border-b border-[#1a1a2e] flex items-center justify-between px-4">
            <div class="flex items-center gap-3">
              <button class="w-8 h-8 rounded-lg bg-[#1a1a2e] flex items-center justify-center text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
              </button>
              <input type="text" value="Job Application Workflow" class="bg-transparent text-white font-medium text-lg border-none outline-none" />
            </div>
            <div class="flex items-center gap-3">
              <button class="px-4 py-2 text-sm font-medium bg-indigo-600 text-white rounded-lg">Save</button>
            </div>
          </header>
          
          <div class="flex h-[600px]">
            <!-- Left: AI Chat Expanded -->
            <aside class="w-96 bg-[#0f0f1a] border-r border-[#1a1a2e] flex flex-col">
              <!-- Chat Header -->
              <div class="p-4 border-b border-[#1a1a2e] flex items-center justify-between">
                <div class="flex items-center gap-2">
                  <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                  </div>
                  <div>
                    <h3 class="text-sm font-semibold text-white">AI Assistant</h3>
                    <p class="text-xs text-green-400">Online</p>
                  </div>
                </div>
                <button class="text-gray-400 hover:text-white" title="Minimize">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/></svg>
                </button>
              </div>
              
              <!-- Chat Messages -->
              <div class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- User Message -->
                <div class="flex justify-end">
                  <div class="max-w-[80%] bg-indigo-600 text-white rounded-2xl rounded-br-md px-4 py-2">
                    <p class="text-sm">I want to add error handling if the job scraping fails</p>
                  </div>
                </div>
                
                <!-- AI Response -->
                <div class="flex justify-start">
                  <div class="max-w-[80%] bg-[#1a1a2e] text-gray-100 rounded-2xl rounded-bl-md px-4 py-3">
                    <p class="text-sm mb-3">Great idea! I can help you add error handling. There are a few approaches:</p>
                    <div class="space-y-2 text-sm">
                      <div class="p-2 bg-[#12121f] rounded-lg">
                        <strong class="text-indigo-400">1. Branch on error</strong>
                        <p class="text-gray-400 text-xs mt-1">Add a condition to check if scraping succeeded</p>
                      </div>
                      <div class="p-2 bg-[#12121f] rounded-lg">
                        <strong class="text-indigo-400">2. Retry with backoff</strong>
                        <p class="text-gray-400 text-xs mt-1">Automatically retry failed scrapes</p>
                      </div>
                      <div class="p-2 bg-[#12121f] rounded-lg">
                        <strong class="text-indigo-400">3. Fallback step</strong>
                        <p class="text-gray-400 text-xs mt-1">Use a different scraper if primary fails</p>
                      </div>
                    </div>
                    <p class="text-sm mt-3">Which approach would you like me to implement?</p>
                  </div>
                </div>
                
                <!-- User Message -->
                <div class="flex justify-end">
                  <div class="max-w-[80%] bg-indigo-600 text-white rounded-2xl rounded-br-md px-4 py-2">
                    <p class="text-sm">Let's go with branch on error</p>
                  </div>
                </div>
                
                <!-- AI Response with Action -->
                <div class="flex justify-start">
                  <div class="max-w-[80%] bg-[#1a1a2e] text-gray-100 rounded-2xl rounded-bl-md px-4 py-3">
                    <p class="text-sm mb-3">I'll add a branch after the scrape step to check for errors. Here's what I'm going to do:</p>
                    <div class="p-3 bg-[#12121f] rounded-lg border border-[#2a2a4a] mb-3">
                      <div class="flex items-center gap-2 mb-2">
                        <span class="text-amber-400">üîÄ</span>
                        <span class="text-sm font-medium text-white">Add Branch Node</span>
                      </div>
                      <ul class="text-xs text-gray-400 space-y-1 ml-6">
                        <li>‚Ä¢ If <code class="text-emerald-400">data.successful === true</code> ‚Üí Continue</li>
                        <li>‚Ä¢ Else ‚Üí Send error notification</li>
                      </ul>
                    </div>
                    <div class="flex gap-2">
                      <button class="px-3 py-1.5 text-xs bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg">Apply Changes</button>
                      <button class="px-3 py-1.5 text-xs bg-[#1a1a2e] hover:bg-[#252538] text-gray-300 rounded-lg border border-[#2a2a4a]">Show in Canvas</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Chat Input -->
              <div class="p-4 border-t border-[#1a1a2e]">
                <div class="flex gap-2">
                  <input type="text" placeholder="Ask anything about your workflow..." class="flex-1 bg-[#1a1a2e] border border-[#2a2a4a] rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500" />
                  <button class="w-10 h-10 bg-indigo-600 hover:bg-indigo-700 rounded-lg flex items-center justify-center text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>
                  </button>
                </div>
                <div class="flex gap-2 mt-2">
                  <button class="px-2 py-1 text-xs bg-[#1a1a2e] hover:bg-[#252538] text-gray-400 rounded">Add a step</button>
                  <button class="px-2 py-1 text-xs bg-[#1a1a2e] hover:bg-[#252538] text-gray-400 rounded">Fix errors</button>
                  <button class="px-2 py-1 text-xs bg-[#1a1a2e] hover:bg-[#252538] text-gray-400 rounded">Explain</button>
                </div>
              </div>
            </aside>
            
            <!-- Center: Workflow -->
            <main class="flex-1 bg-[#0a0a14] flex items-center justify-center">
              <p class="text-gray-500">[Workflow Canvas with pending changes highlighted]</p>
            </main>
            
            <!-- Right: Tools Panel -->
            <aside class="w-80 bg-[#0f0f1a] border-l border-[#1a1a2e]">
              <div class="flex border-b border-[#1a1a2e]">
                <button class="flex-1 px-4 py-3 text-sm font-medium text-indigo-400 border-b-2 border-indigo-500">Tools</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Inputs</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Config</button>
                <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500">Test</button>
              </div>
              <div class="p-4 text-center text-gray-500 text-sm">
                Tool palette content...
              </div>
            </aside>
          </div>
        </div>
        
        <div class="mt-6 p-4 bg-[#12121f] rounded-lg border border-[#1a1a2e]">
          <h4 class="text-sm font-semibold text-white mb-2">üìù Design Notes</h4>
          <ul class="text-sm text-gray-400 space-y-1">
            <li>‚Ä¢ Expanded chat panel (vs collapsed icon in other states)</li>
            <li>‚Ä¢ Conversational UI with message bubbles</li>
            <li>‚Ä¢ AI can suggest and execute workflow changes</li>
            <li>‚Ä¢ Quick action chips for common requests</li>
            <li>‚Ä¢ "Apply Changes" and "Show in Canvas" for AI actions</li>
            <li>‚Ä¢ Persistent - always accessible via icon when collapsed</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- End of States -->
    <section class="p-8 text-center">
      <div class="max-w-2xl mx-auto">
        <h2 class="text-2xl font-bold text-white mb-4">üéâ End of Variation A</h2>
        <p class="text-gray-400 mb-6">You've reviewed all 20 states of the Flight C workflow editor mockup.</p>
        <a href="#state-empty" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg inline-block">
          Back to Top
        </a>
      </div>
    </section>
    
  </main>
  
  <!-- JavaScript for navigation highlighting -->
  <script>
    // Intersection Observer for active nav state
    const sections = document.querySelectorAll('.state-section');
    const navItems = document.querySelectorAll('.nav-item');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.id;
          navItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('href') === '#' + id) {
              item.classList.add('active');
            }
          });
        }
      });
    }, { threshold: 0.3 });
    
    sections.forEach(section => observer.observe(section));
  </script>
</body>
</html>

