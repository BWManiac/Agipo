<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Agent - Step 2: Personality</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .collapsible {
      transition: max-height 0.3s ease-out;
      overflow: hidden;
    }
    .collapsible.collapsed {
      max-height: 0;
    }
    .collapsible.expanded {
      max-height: 1000px;
    }
  </style>
</head>
<body class="bg-muted/30 p-8" style="--primary: 221.2 83.2% 53.3%; --accent: 210 40% 96.1%; --muted: 210 40% 96.1%; --border: 214.3 31.8% 91.4%; --input: 214.3 31.8% 91.4%; --foreground: 222.2 84% 4.9%; --muted-foreground: 215.4 16.3% 46.9%;">
  <div class="max-w-2xl mx-auto bg-background rounded-xl border border-border shadow-sm p-6">
    <!-- Step Indicator -->
    <div class="mb-6">
      <div class="flex items-center justify-between mb-3">
        <h1 class="text-lg font-semibold text-foreground">Create Agent</h1>
        <span class="text-sm text-muted-foreground">Step 2 of 3</span>
      </div>
      <div class="bg-primary/20 relative h-2 w-full overflow-hidden rounded-full">
        <div class="bg-primary h-full transition-all" style="width: 66.66%"></div>
      </div>
    </div>

    <!-- Form -->
    <form class="space-y-6">
      <!-- Instructions -->
      <div class="space-y-2">
        <label for="instructions" class="text-sm font-medium text-foreground">
          Instructions <span class="text-destructive">*</span>
        </label>
        <textarea
          id="instructions"
          name="instructions"
          required
          minlength="10"
          rows="8"
          placeholder="You are a helpful AI assistant. Your role is to..."
          class="flex min-h-16 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 placeholder:text-muted-foreground resize-none"
        ></textarea>
        <div class="text-xs text-muted-foreground">
          <p>Define how the agent should behave and what its purpose is.</p>
          <p class="mt-1"><strong>Example:</strong> "You are a Product Manager. Your role is to synthesize feedback, prioritize roadmap items, and keep delivery aligned with business goals."</p>
        </div>
      </div>

      <!-- Model Selection -->
      <div class="space-y-2">
        <label for="model" class="text-sm font-medium text-foreground">
          Model <span class="text-destructive">*</span>
        </label>
        <select
          id="model"
          name="model"
          required
          class="h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50"
        >
          <option value="google/gemini-2.5-pro" selected>Google Gemini 2.5 Pro</option>
          <option value="openai/gpt-4o">OpenAI GPT-4o</option>
          <option value="anthropic/claude-3.5-sonnet">Anthropic Claude 3.5 Sonnet</option>
        </select>
        <p class="text-xs text-muted-foreground">The language model this agent will use</p>
      </div>

      <!-- Objectives (Collapsible) -->
      <div class="rounded-md border border-border">
        <button
          type="button"
          onclick="toggleSection('objectives')"
          class="w-full px-4 py-3 flex items-center justify-between text-left hover:bg-accent transition-colors rounded-t-md"
        >
          <div>
            <span class="text-sm font-medium text-foreground">Objectives</span>
            <span class="text-xs text-muted-foreground ml-2">(optional)</span>
          </div>
          <svg id="objectives-arrow" class="size-4 text-muted-foreground transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="objectives-content" class="collapsible collapsed px-4 pb-4">
          <div class="space-y-3 pt-2">
            <div class="flex gap-2">
              <input
                type="text"
                placeholder="e.g., Accelerate PLG roadmap"
                class="h-9 flex-1 rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 placeholder:text-muted-foreground"
              />
              <button type="button" class="h-9 px-3 py-2 text-sm text-muted-foreground hover:text-foreground">Remove</button>
            </div>
            <button type="button" class="text-sm text-primary hover:text-primary/90">+ Add objective</button>
          </div>
        </div>
      </div>

      <!-- Guardrails (Collapsible) -->
      <div class="rounded-md border border-border">
        <button
          type="button"
          onclick="toggleSection('guardrails')"
          class="w-full px-4 py-3 flex items-center justify-between text-left hover:bg-accent transition-colors rounded-t-md"
        >
          <div>
            <span class="text-sm font-medium text-foreground">Guardrails</span>
            <span class="text-xs text-muted-foreground ml-2">(optional)</span>
          </div>
          <svg id="guardrails-arrow" class="size-4 text-muted-foreground transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="guardrails-content" class="collapsible collapsed px-4 pb-4">
          <div class="space-y-3 pt-2">
            <div class="flex gap-2">
              <input
                type="text"
                placeholder="e.g., Escalate spend > $10k"
                class="h-9 flex-1 rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 placeholder:text-muted-foreground"
              />
              <button type="button" class="h-9 px-3 py-2 text-sm text-muted-foreground hover:text-foreground">Remove</button>
            </div>
            <button type="button" class="text-sm text-primary hover:text-primary/90">+ Add guardrail</button>
          </div>
        </div>
      </div>

      <!-- Manager Toggle -->
      <div class="rounded-md border border-border p-4">
        <label class="flex items-center gap-3 cursor-pointer">
          <input
            type="checkbox"
            id="is-manager"
            name="is-manager"
            onchange="toggleSubAgents()"
            class="size-4 shrink-0 rounded-[4px] border border-input bg-transparent shadow-xs transition-shadow outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary"
          />
          <div>
            <span class="text-sm font-medium text-foreground">This agent is a manager</span>
            <p class="text-xs text-muted-foreground mt-1">Managers can delegate tasks to sub-agents</p>
          </div>
        </label>
        <div id="sub-agents-link" class="hidden mt-3">
          <button
            type="button"
            class="text-sm text-primary hover:text-primary/90 underline"
            onclick="alert('Opens sub-agents selection screen')"
          >
            Configure Sub-Agents →
          </button>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex justify-between gap-2 pt-4 border-t border-border">
        <button
          type="button"
          class="h-9 rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-xs transition-[color,box-shadow] hover:bg-accent hover:text-accent-foreground outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50"
        >
          ← Previous
        </button>
        <button
          type="submit"
          id="next-button"
          disabled
          class="h-9 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow-xs transition-all hover:bg-primary/90 disabled:pointer-events-none disabled:opacity-50 outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50"
        >
          Next
        </button>
      </div>
    </form>
  </div>

  <script>
    function toggleSection(id) {
      const content = document.getElementById(id + '-content');
      const arrow = document.getElementById(id + '-arrow');
      
      if (content.classList.contains('collapsed')) {
        content.classList.remove('collapsed');
        content.classList.add('expanded');
        arrow.classList.add('rotate-180');
      } else {
        content.classList.remove('expanded');
        content.classList.add('collapsed');
        arrow.classList.remove('rotate-180');
      }
    }

    function toggleSubAgents() {
      const checkbox = document.getElementById('is-manager');
      const link = document.getElementById('sub-agents-link');
      
      if (checkbox.checked) {
        link.classList.remove('hidden');
      } else {
        link.classList.add('hidden');
      }
    }

    // Validation
    const instructionsInput = document.getElementById('instructions');
    const nextButton = document.getElementById('next-button');

    function validateForm() {
      const instructionsValid = instructionsInput.value.length >= 10;
      nextButton.disabled = !instructionsValid;
    }

    instructionsInput.addEventListener('input', validateForm);
  </script>
</body>
</html>
