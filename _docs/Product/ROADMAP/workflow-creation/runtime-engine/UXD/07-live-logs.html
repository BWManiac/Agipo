<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Runtime Engine - Live Logs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: 'rgb(229 231 235)',
                        input: 'rgb(229 231 235)',
                        ring: 'rgb(59 130 246)',
                        background: 'rgb(255 255 255)',
                        foreground: 'rgb(15 23 42)',
                        primary: {
                            DEFAULT: 'rgb(15 23 42)',
                            foreground: 'rgb(255 255 255)',
                        },
                        secondary: {
                            DEFAULT: 'rgb(243 244 246)',
                            foreground: 'rgb(15 23 42)',
                        },
                        muted: {
                            DEFAULT: 'rgb(243 244 246)',
                            foreground: 'rgb(107 114 128)',
                        },
                    },
                    animation: {
                        'log-stream': 'logStream 0.3s ease-out',
                        'error-flash': 'errorFlash 0.5s ease-out',
                        'new-entry': 'newEntry 0.4s ease-out',
                        'cursor-blink': 'cursorBlink 1s ease-in-out infinite',
                        'status-update': 'statusUpdate 0.3s ease-out',
                    },
                    keyframes: {
                        logStream: {
                            '0%': { opacity: '0', transform: 'translateY(-10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        errorFlash: {
                            '0%': { backgroundColor: 'rgb(254 226 226)', borderColor: 'rgb(239 68 68)' },
                            '100%': { backgroundColor: 'transparent', borderColor: 'transparent' },
                        },
                        newEntry: {
                            '0%': { backgroundColor: 'rgb(219 234 254)', transform: 'scale(1.01)' },
                            '100%': { backgroundColor: 'transparent', transform: 'scale(1)' },
                        },
                        cursorBlink: {
                            '0%, 50%': { opacity: '1' },
                            '51%, 100%': { opacity: '0' },
                        },
                        statusUpdate: {
                            '0%': { backgroundColor: 'rgb(220 252 231)', transform: 'scale(1.02)' },
                            '100%': { backgroundColor: 'rgb(255 255 255)', transform: 'scale(1)' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white border-b sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-4">
                    <h1 class="text-xl font-semibold">Live Logs</h1>
                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full animate-pulse">
                        üü¢ Streaming
                    </span>
                </div>
                <div class="flex items-center gap-3">
                    <div class="text-sm text-muted-foreground">
                        Email Processing ‚Ä¢ Step 2/3 ‚Ä¢ 847 logs
                    </div>
                    <button class="px-4 py-2 text-sm border rounded-lg hover:bg-gray-50 transition-colors">
                        Pause Stream
                    </button>
                    <button class="px-4 py-2 text-sm border rounded-lg hover:bg-gray-50 transition-colors">
                        Download Logs
                    </button>
                    <button class="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors">
                        Clear Buffer
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-4 gap-6">
            <!-- Left Sidebar: Log Controls -->
            <div class="space-y-4">
                <!-- Stream Status -->
                <div class="bg-white rounded-lg border p-4">
                    <div class="flex items-center gap-2 mb-3">
                        <div class="w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center">
                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                        </div>
                        <h3 class="text-sm font-medium">Stream Status</h3>
                    </div>

                    <div class="space-y-3 text-xs">
                        <div class="p-3 bg-green-50 border border-green-200 rounded-lg animate-status-update">
                            <div class="text-green-900 font-medium mb-1">Live Streaming Active</div>
                            <div class="text-green-700 space-y-1">
                                <div>Rate: ~3.2 logs/sec</div>
                                <div>Buffer: 2,847 / 10,000</div>
                                <div>Latency: 23ms avg</div>
                            </div>
                        </div>

                        <!-- Connection Health -->
                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <span class="text-muted-foreground">WebSocket:</span>
                                <span class="text-green-600 font-medium">Connected</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-muted-foreground">Compression:</span>
                                <span class="font-medium">Enabled</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-muted-foreground">Auto-scroll:</span>
                                <span class="text-blue-600 font-medium">Following</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Log Level Filters -->
                <div class="bg-white rounded-lg border p-4">
                    <h3 class="text-sm font-medium mb-3">Log Level Filters</h3>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-gray-500 rounded"></div>
                                <span class="text-xs">Debug</span>
                                <span class="text-xs text-muted-foreground">(234)</span>
                            </div>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-blue-500 rounded"></div>
                                <span class="text-xs">Info</span>
                                <span class="text-xs text-muted-foreground">(567)</span>
                            </div>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-yellow-500 rounded"></div>
                                <span class="text-xs">Warning</span>
                                <span class="text-xs text-muted-foreground">(42)</span>
                            </div>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-red-500 rounded"></div>
                                <span class="text-xs">Error</span>
                                <span class="text-xs text-muted-foreground">(4)</span>
                            </div>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-green-500 rounded"></div>
                                <span class="text-xs">Success</span>
                                <span class="text-xs text-muted-foreground">(156)</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Source Filters -->
                <div class="bg-white rounded-lg border p-4">
                    <h3 class="text-sm font-medium mb-3">Source Filters</h3>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <span class="text-xs">email_fetcher.py</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <span class="text-xs">content_parser.py</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <span class="text-xs">ai_processor.py</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" checked class="rounded border-gray-300">
                            <span class="text-xs">notion_writer.py</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" class="rounded border-gray-300">
                            <span class="text-xs">workflow_runner.py</span>
                        </label>
                    </div>
                </div>

                <!-- Search and Filter -->
                <div class="bg-white rounded-lg border p-4">
                    <h3 class="text-sm font-medium mb-3">Search & Filter</h3>
                    <div class="space-y-3">
                        <div class="relative">
                            <svg class="absolute left-2 top-2 w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            <input type="text" placeholder="Search logs..." 
                                   class="w-full pl-7 pr-3 py-2 text-xs border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>

                        <!-- Common Searches -->
                        <div class="space-y-1">
                            <button class="w-full text-left px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded">
                                error OR exception
                            </button>
                            <button class="w-full text-left px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded">
                                "API call"
                            </button>
                            <button class="w-full text-left px-2 py-1 text-xs text-blue-600 hover:bg-blue-50 rounded">
                                processing time
                            </button>
                        </div>

                        <!-- Advanced Filters -->
                        <details class="text-xs">
                            <summary class="cursor-pointer text-muted-foreground">Advanced filters</summary>
                            <div class="mt-2 space-y-2">
                                <div>
                                    <label class="block text-xs text-muted-foreground mb-1">Time range:</label>
                                    <select class="w-full px-2 py-1 text-xs border rounded">
                                        <option>Last 5 minutes</option>
                                        <option selected>Last 15 minutes</option>
                                        <option>Last hour</option>
                                        <option>Custom range</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-muted-foreground mb-1">Thread ID:</label>
                                    <input type="text" placeholder="e.g., thread-1234" 
                                           class="w-full px-2 py-1 text-xs border rounded">
                                </div>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- Stream Controls -->
                <div class="bg-white rounded-lg border p-4">
                    <h3 class="text-sm font-medium mb-3">Stream Controls</h3>
                    <div class="space-y-2">
                        <button class="w-full px-3 py-2 text-xs bg-green-50 border border-green-200 text-green-700 rounded-lg hover:bg-green-100 transition-colors">
                            ‚è∏Ô∏è Pause Stream
                        </button>
                        <button class="w-full px-3 py-2 text-xs border rounded-lg hover:bg-gray-50 transition-colors">
                            üîÑ Resume Stream
                        </button>
                        <button class="w-full px-3 py-2 text-xs border rounded-lg hover:bg-gray-50 transition-colors">
                            ‚¨áÔ∏è Go to Bottom
                        </button>
                        <button class="w-full px-3 py-2 text-xs border rounded-lg hover:bg-gray-50 transition-colors">
                            üóëÔ∏è Clear Buffer
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Log Display -->
            <div class="col-span-3 space-y-6">
                <!-- Log Header -->
                <div class="bg-white rounded-lg border p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold">Live Execution Log</h3>
                            <p class="text-sm text-muted-foreground mt-0.5">Real-time output from Email Processing workflow</p>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="text-sm">
                                <div class="text-muted-foreground">Buffer usage:</div>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 28%"></div>
                                </div>
                                <div class="text-xs text-muted-foreground">2,847 / 10,000 logs</div>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="px-3 py-2 text-xs border rounded hover:bg-gray-50">
                                    Word Wrap
                                </button>
                                <button class="px-3 py-2 text-xs border rounded hover:bg-gray-50">
                                    Timestamps
                                </button>
                                <button class="px-3 py-2 text-xs border rounded hover:bg-gray-50">
                                    Full Screen
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Log Terminal -->
                <div class="bg-white rounded-lg border">
                    <div class="px-4 py-3 border-b bg-gray-50">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                <span class="text-sm font-medium">Live Stream</span>
                            </div>
                            <div class="text-xs text-muted-foreground">
                                Last update: just now
                            </div>
                        </div>
                    </div>
                    
                    <!-- Log Content -->
                    <div class="bg-gray-900 text-gray-300 font-mono text-xs p-4 h-[600px] overflow-y-auto">
                        <div class="space-y-0.5">
                            <!-- Previous logs (abbreviated) -->
                            <div class="text-gray-500">[2024-12-05 14:32:18.234] DEBUG email_fetcher.py:45 - Initializing Gmail API client</div>
                            <div class="text-blue-400">[2024-12-05 14:32:18.456] INFO email_fetcher.py:67 - Successfully authenticated with Gmail API</div>
                            <div class="text-gray-500">[2024-12-05 14:32:18.678] DEBUG email_fetcher.py:89 - Executing query: 'is:unread from:team@company.com'</div>
                            <div class="text-green-400">[2024-12-05 14:32:19.123] SUCCESS email_fetcher.py:94 - Retrieved 42 emails from Gmail</div>
                            <div class="text-blue-400">[2024-12-05 14:32:19.234] INFO workflow_runner.py:156 - Starting content processing step (2/3)</div>
                            <div class="text-gray-500">[2024-12-05 14:32:19.345] DEBUG content_parser.py:23 - Initializing AI processor with model: gpt-4-turbo</div>
                            
                            <!-- Recent activity -->
                            <div class="text-blue-400">[2024-12-05 14:32:19.567] INFO ai_processor.py:45 - Processing email #12: "Budget Approval Request"</div>
                            <div class="text-gray-500">[2024-12-05 14:32:19.678] DEBUG ai_processor.py:67 - Token count: 1,234 (prompt: 987, completion: 247)</div>
                            <div class="text-purple-400">[2024-12-05 14:32:21.123] TRACE ai_processor.py:89 - AI response received in 1.445s</div>
                            <div class="text-green-400">[2024-12-05 14:32:21.234] SUCCESS content_parser.py:112 - Extracted 4 entities from email #12</div>
                            <div class="text-gray-500">[2024-12-05 14:32:21.345] DEBUG notion_writer.py:34 - Creating task in database: Team Tasks</div>
                            <div class="text-green-400">[2024-12-05 14:32:21.567] SUCCESS notion_writer.py:78 - Task created with ID: task_2024_156</div>

                            <!-- Live streaming logs -->
                            <div class="text-blue-400 animate-new-entry">[2024-12-05 14:32:21.678] INFO ai_processor.py:45 - Processing email #13: "Team Meeting Notes"</div>
                            <div class="text-gray-500 animate-new-entry">[2024-12-05 14:32:21.789] DEBUG ai_processor.py:52 - Email content length: 1,847 characters</div>
                            <div class="text-gray-500 animate-new-entry">[2024-12-05 14:32:21.890] DEBUG ai_processor.py:58 - Creating entity extraction prompt</div>
                            <div class="text-purple-400 animate-new-entry">[2024-12-05 14:32:21.923] TRACE ai_processor.py:67 - Making API call to OpenAI (attempt 1/3)</div>
                            <div class="text-gray-500 animate-new-entry">[2024-12-05 14:32:21.945] DEBUG ai_processor.py:72 - Request headers: {'Authorization': 'Bearer sk-...', 'Content-Type': 'application/json'}</div>
                            <div class="text-gray-500 animate-new-entry">[2024-12-05 14:32:22.012] DEBUG ai_processor.py:78 - Request payload size: 2,134 bytes</div>
                            <div class="text-blue-400 animate-new-entry">[2024-12-05 14:32:22.234] INFO ai_processor.py:82 - API call in progress (response pending)</div>
                            <div class="text-gray-500 animate-new-entry">[2024-12-05 14:32:22.456] DEBUG ai_processor.py:85 - Waiting for AI response...</div>
                            
                            <!-- Real-time logs with animation -->
                            <div class="text-purple-400 animate-log-stream">[2024-12-05 14:32:23.678] TRACE ai_processor.py:89 - Received partial response (chunk 1/3)</div>
                            <div class="text-purple-400 animate-log-stream">[2024-12-05 14:32:23.789] TRACE ai_processor.py:89 - Received partial response (chunk 2/3)</div>
                            <div class="text-purple-400 animate-log-stream">[2024-12-05 14:32:23.890] TRACE ai_processor.py:89 - Received partial response (chunk 3/3)</div>
                            <div class="text-green-400 animate-log-stream">[2024-12-05 14:32:23.923] SUCCESS ai_processor.py:94 - AI response complete (total time: 1.678s)</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:23.945] DEBUG ai_processor.py:98 - Response validation passed</div>
                            <div class="text-blue-400 animate-log-stream">[2024-12-05 14:32:23.967] INFO content_parser.py:156 - Parsing AI response for entities</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:23.989] DEBUG content_parser.py:167 - Found 3 potential entities in response</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:24.012] DEBUG content_parser.py:178 - Entity 1: "Team Meeting" (type: EVENT, confidence: 0.94)</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:24.034] DEBUG content_parser.py:178 - Entity 2: "Next Friday" (type: DATE, confidence: 0.87)</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:24.056] DEBUG content_parser.py:178 - Entity 3: "John Doe" (type: PERSON, confidence: 0.92)</div>
                            <div class="text-green-400 animate-log-stream">[2024-12-05 14:32:24.078] SUCCESS content_parser.py:189 - Successfully extracted 3 entities</div>
                            <div class="text-blue-400 animate-log-stream">[2024-12-05 14:32:24.101] INFO content_parser.py:201 - Computing priority score</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:24.123] DEBUG content_parser.py:215 - Priority factors: urgency=medium, entities=3, sender_importance=high</div>
                            <div class="text-green-400 animate-log-stream">[2024-12-05 14:32:24.145] SUCCESS content_parser.py:223 - Priority score calculated: MEDIUM (6.8/10)</div>
                            <div class="text-blue-400 animate-log-stream">[2024-12-05 14:32:24.167] INFO notion_writer.py:34 - Creating task for email #13</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:24.189] DEBUG notion_writer.py:45 - Task title: "üìß Team Meeting Notes - From john.doe@company.com"</div>
                            <div class="text-gray-500 animate-log-stream">[2024-12-05 14:32:24.212] DEBUG notion_writer.py:56 - Preparing Notion API payload</div>
                            <div class="text-purple-400 animate-log-stream">[2024-12-05 14:32:24.234] TRACE notion_writer.py:67 - Making API call to Notion (database: Team Tasks)</div>
                            <div class="text-green-400 animate-log-stream">[2024-12-05 14:32:24.567] SUCCESS notion_writer.py:78 - Task created successfully (ID: task_2024_157)</div>
                            
                            <!-- Most recent log with cursor -->
                            <div class="text-blue-400 animate-log-stream">[2024-12-05 14:32:24.678] INFO workflow_runner.py:234 - Email #13 processing complete (2.89s)</div>
                            <div class="text-blue-400 animate-log-stream">[2024-12-05 14:32:24.701] INFO ai_processor.py:45 - Processing email #14: "Quarterly Review Feedback"</div>
                            <div class="flex items-center text-green-400">
                                <span>[2024-12-05 14:32:24.723] INFO ai_processor.py:52 - Starting content analysis</span>
                                <span class="ml-2 animate-cursor-blink">‚ñã</span>
                            </div>
                        </div>
                    </div>

                    <!-- Log Footer with Controls -->
                    <div class="px-4 py-3 border-t bg-gray-50">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4 text-xs text-muted-foreground">
                                <div class="flex items-center gap-1">
                                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                    <span>Live</span>
                                </div>
                                <span>Line 2,847 of 10,000 buffer</span>
                                <span>Auto-scroll: On</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="px-2 py-1 text-xs border rounded hover:bg-gray-100 transition-colors">
                                    üìã Copy
                                </button>
                                <button class="px-2 py-1 text-xs border rounded hover:bg-gray-100 transition-colors">
                                    üíæ Export
                                </button>
                                <button class="px-2 py-1 text-xs border rounded hover:bg-gray-100 transition-colors">
                                    üîç Find
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Log Statistics -->
                <div class="grid grid-cols-4 gap-4">
                    <div class="bg-white rounded-lg border p-4">
                        <div class="text-sm font-medium text-gray-500 mb-1">Total Logs</div>
                        <div class="text-2xl font-bold">2,847</div>
                        <div class="text-xs text-green-600">+23 in last min</div>
                    </div>
                    <div class="bg-white rounded-lg border p-4">
                        <div class="text-sm font-medium text-gray-500 mb-1">Errors</div>
                        <div class="text-2xl font-bold text-red-600">4</div>
                        <div class="text-xs text-muted-foreground">0 in last min</div>
                    </div>
                    <div class="bg-white rounded-lg border p-4">
                        <div class="text-sm font-medium text-gray-500 mb-1">Warnings</div>
                        <div class="text-2xl font-bold text-yellow-600">42</div>
                        <div class="text-xs text-yellow-600">+2 in last min</div>
                    </div>
                    <div class="bg-white rounded-lg border p-4">
                        <div class="text-sm font-medium text-gray-500 mb-1">Stream Rate</div>
                        <div class="text-2xl font-bold text-blue-600">3.2/s</div>
                        <div class="text-xs text-muted-foreground">avg last 5min</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>
</html>